INFO [2025-03-04 21:45:26] Starting race predictions process
INFO [2025-03-04 21:45:26] Reading race data
INFO [2025-03-04 21:46:16] Starting race predictions process
INFO [2025-03-04 21:46:16] Reading race data
INFO [2025-03-04 21:46:16] Current date: 2025-03-04
INFO [2025-03-15 12:26:22] Starting race predictions process
INFO [2025-03-15 12:26:22] Reading races data
INFO [2025-03-15 12:26:22] Looking for races on: 2025-03-16
INFO [2025-03-15 12:28:22] Starting race predictions process
INFO [2025-03-15 12:28:22] Reading races data
INFO [2025-03-15 12:28:22] Looking for races on: 2025-03-16
INFO [2025-03-15 12:28:22] Found 2 races scheduled for tomorrow
INFO [2025-03-15 12:28:22] Men racing tomorrow: TRUE
INFO [2025-03-15 12:28:22] Ladies racing tomorrow: TRUE
INFO [2025-03-15 12:28:22] Found 1 men's races
INFO [2025-03-15 12:28:22] Found 1 ladies' races
INFO [2025-03-15 12:28:22] Loading men's startlist
INFO [2025-03-15 12:28:22] Loaded 82 skiers in men's startlist
INFO [2025-03-15 12:28:22] Loading ladies' startlist
INFO [2025-03-15 12:28:22] Loaded 54 skiers in ladies' startlist
INFO [2025-03-15 12:28:23] Processing men's predictions
INFO [2025-03-15 12:28:24] Processing men data
INFO [2025-03-15 12:28:24] Using WORLD CUP points system for tomorrow's races
INFO [2025-03-15 12:28:28] Processing men race 1: 20 C
INFO [2025-03-15 12:28:28] Using World Cup points for this race
INFO [2025-03-15 12:28:30] Creating model for top 1 positions
INFO [2025-03-15 12:28:31] Brier score for threshold 1 : 0.0112
INFO [2025-03-15 12:28:31] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:28:33] Creating model for top 3 positions
INFO [2025-03-15 12:28:35] Brier score for threshold 3 : 0.029
INFO [2025-03-15 12:28:35] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-15 12:28:37] Creating model for top 5 positions
INFO [2025-03-15 12:28:39] Brier score for threshold 5 : 0.0439
INFO [2025-03-15 12:28:39] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-15 12:28:40] Creating model for top 10 positions
INFO [2025-03-15 12:28:43] Brier score for threshold 10 : 0.0723
INFO [2025-03-15 12:28:43] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-15 12:28:45] Creating model for top 30 positions
INFO [2025-03-15 12:28:47] Brier score for threshold 30 : 0.1324
INFO [2025-03-15 12:28:47] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:28:49] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-15 12:28:49] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-15 12:28:49] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-15 12:28:49] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-15 12:28:49] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-15 12:28:49] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-15 12:28:49] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-15 12:28:49] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-15 12:28:49] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-15 12:28:49] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-15 12:28:49] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-15 12:28:49] Calculated percentage for Distance_Elo
INFO [2025-03-15 12:28:49] Calculated percentage for Distance_C_Elo
INFO [2025-03-15 12:28:49] Calculated percentage for Distance_F_Elo
INFO [2025-03-15 12:28:49] Calculated percentage for Elo
INFO [2025-03-15 12:28:49] Calculated percentage for Sprint_Elo
INFO [2025-03-15 12:28:49] Calculated percentage for Sprint_C_Elo
INFO [2025-03-15 12:28:49] Calculated percentage for Sprint_F_Elo
INFO [2025-03-15 12:28:49] Calculated percentage for Freestyle_Elo
INFO [2025-03-15 12:28:49] Calculated percentage for Classic_Elo
INFO [2025-03-15 12:28:49] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:28:49] Attempting prediction for threshold 1 with 82 rows
INFO [2025-03-15 12:28:49] Made predictions with adjustments for position threshold 1
INFO [2025-03-15 12:28:49] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-15 12:28:49] Attempting prediction for threshold 3 with 82 rows
INFO [2025-03-15 12:28:49] Made predictions with adjustments for position threshold 3
INFO [2025-03-15 12:28:49] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-15 12:28:49] Attempting prediction for threshold 5 with 82 rows
INFO [2025-03-15 12:28:49] Made predictions with adjustments for position threshold 5
INFO [2025-03-15 12:28:49] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-15 12:28:49] Attempting prediction for threshold 10 with 82 rows
INFO [2025-03-15 12:28:49] Made predictions with adjustments for position threshold 10
INFO [2025-03-15 12:28:49] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:28:49] Attempting prediction for threshold 30 with 82 rows
INFO [2025-03-15 12:28:49] Made predictions with adjustments for position threshold 30
INFO [2025-03-15 12:28:49] Position probability sums BEFORE normalization:
INFO [2025-03-15 12:28:49]   prob_top1: 111.00% (target: 100%)
INFO [2025-03-15 12:28:49]   prob_top3: 323.30% (target: 300%)
INFO [2025-03-15 12:28:49]   prob_top5: 505.80% (target: 500%)
INFO [2025-03-15 12:28:49]   prob_top10: 923.90% (target: 1000%)
INFO [2025-03-15 12:28:49]   prob_top30: 2723.00% (target: 3000%)
INFO [2025-03-15 12:28:49]   prob_top1 normalization: applied scaling factor of 0.9009
INFO [2025-03-15 12:28:49]   prob_top3 normalization: applied scaling factor of 0.9279
INFO [2025-03-15 12:28:49]   prob_top5 normalization: applied scaling factor of 0.9885
INFO [2025-03-15 12:28:49]   prob_top10 normalization: applied scaling factor of 1.0824
INFO [2025-03-15 12:28:49]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-15 12:28:49]   prob_top30 normalization: applied scaling factor of 1.1017
INFO [2025-03-15 12:28:49] Position probability sums AFTER normalization:
INFO [2025-03-15 12:28:49]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-15 12:28:49]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-15 12:28:49]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-15 12:28:49]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-15 12:28:49]   prob_top30: 3000.00% (target: 3000%)
INFO [2025-03-15 12:28:49] Combining race predictions
INFO [2025-03-15 12:28:49] Starting with first race data
INFO [2025-03-15 12:28:49] Calculating totals
INFO [2025-03-15 12:28:49] Returning final predictions
INFO [2025-03-15 12:28:49] Final predictions calculated for men
INFO [2025-03-15 12:28:49] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250316/men_position_probabilities.xlsx
INFO [2025-03-15 12:28:49] Saved men points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250316/men-points.xlsx
INFO [2025-03-15 12:28:49] Processing ladies predictions
INFO [2025-03-15 12:28:49] Processing ladies data
INFO [2025-03-15 12:28:49] Using WORLD CUP points system for tomorrow's races
INFO [2025-03-15 12:28:52] Processing ladies race 1: 20 C
INFO [2025-03-15 12:28:52] Using World Cup points for this race
INFO [2025-03-15 12:28:53] Creating model for top 1 positions
INFO [2025-03-15 12:28:55] Brier score for threshold 1 : 0.0123
INFO [2025-03-15 12:28:55] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:28:56] Creating model for top 3 positions
INFO [2025-03-15 12:28:58] Brier score for threshold 3 : 0.031
INFO [2025-03-15 12:28:58] Variables selected for 3 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:28:59] Creating model for top 5 positions
INFO [2025-03-15 12:29:00] Brier score for threshold 5 : 0.0459
INFO [2025-03-15 12:29:00] Variables selected for 5 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:29:01] Creating model for top 10 positions
INFO [2025-03-15 12:29:02] Brier score for threshold 10 : 0.071
INFO [2025-03-15 12:29:02] Variables selected for 10 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:29:03] Creating model for top 30 positions
INFO [2025-03-15 12:29:05] Brier score for threshold 30 : 0.1264
INFO [2025-03-15 12:29:05] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:29:07] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-15 12:29:07] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-15 12:29:07] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-15 12:29:07] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-15 12:29:07] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-15 12:29:07] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-15 12:29:07] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-15 12:29:07] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-15 12:29:07] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-15 12:29:07] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-15 12:29:07] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-15 12:29:07] Calculated percentage for Distance_Elo
INFO [2025-03-15 12:29:07] Calculated percentage for Distance_C_Elo
INFO [2025-03-15 12:29:07] Calculated percentage for Distance_F_Elo
INFO [2025-03-15 12:29:07] Calculated percentage for Elo
INFO [2025-03-15 12:29:07] Calculated percentage for Sprint_Elo
INFO [2025-03-15 12:29:07] Calculated percentage for Sprint_C_Elo
INFO [2025-03-15 12:29:07] Calculated percentage for Sprint_F_Elo
INFO [2025-03-15 12:29:07] Calculated percentage for Freestyle_Elo
INFO [2025-03-15 12:29:07] Calculated percentage for Classic_Elo
INFO [2025-03-15 12:29:07] Model for threshold 1 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:29:07] Attempting prediction for threshold 1 with 54 rows
INFO [2025-03-15 12:29:07] Made predictions with adjustments for position threshold 1
INFO [2025-03-15 12:29:07] Model for threshold 3 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:29:07] Attempting prediction for threshold 3 with 54 rows
INFO [2025-03-15 12:29:07] Made predictions with adjustments for position threshold 3
INFO [2025-03-15 12:29:07] Model for threshold 5 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:29:07] Attempting prediction for threshold 5 with 54 rows
INFO [2025-03-15 12:29:07] Made predictions with adjustments for position threshold 5
INFO [2025-03-15 12:29:07] Model for threshold 10 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:29:07] Attempting prediction for threshold 10 with 54 rows
INFO [2025-03-15 12:29:07] Made predictions with adjustments for position threshold 10
INFO [2025-03-15 12:29:07] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:29:07] Attempting prediction for threshold 30 with 54 rows
INFO [2025-03-15 12:29:07] Made predictions with adjustments for position threshold 30
INFO [2025-03-15 12:29:07] Position probability sums BEFORE normalization:
INFO [2025-03-15 12:29:07]   prob_top1: 49.30% (target: 100%)
INFO [2025-03-15 12:29:07]   prob_top3: 260.10% (target: 300%)
INFO [2025-03-15 12:29:07]   prob_top5: 457.90% (target: 500%)
INFO [2025-03-15 12:29:07]   prob_top10: 916.30% (target: 1000%)
INFO [2025-03-15 12:29:07]   prob_top30: 2707.60% (target: 3000%)
INFO [2025-03-15 12:29:07]   prob_top1 normalization: applied scaling factor of 2.0284
INFO [2025-03-15 12:29:07]   prob_top3 normalization: applied scaling factor of 1.1534
INFO [2025-03-15 12:29:07]   prob_top5 normalization: applied scaling factor of 1.0919
INFO [2025-03-15 12:29:07]   Capping 2 skiers with >100% probability for prob_top10
INFO [2025-03-15 12:29:07]   prob_top10 normalization: applied scaling factor of 1.0913
INFO [2025-03-15 12:29:07]   Capping 11 skiers with >100% probability for prob_top30
INFO [2025-03-15 12:29:07]   Recursive capping needed after redistribution
INFO [2025-03-15 12:29:07]   prob_top30 normalization: applied scaling factor of 1.1080
WARN [2025-03-15 12:29:07]   prob_top30 sum after capping: 2996.48% (target: 3000.00%)
INFO [2025-03-15 12:29:07] Position probability sums AFTER normalization:
INFO [2025-03-15 12:29:07]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-15 12:29:07]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-15 12:29:07]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-15 12:29:07]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-15 12:29:07]   prob_top30: 2996.48% (target: 3000%)
INFO [2025-03-15 12:29:07] Combining race predictions
INFO [2025-03-15 12:29:07] Starting with first race data
INFO [2025-03-15 12:29:07] Calculating totals
INFO [2025-03-15 12:29:07] Returning final predictions
INFO [2025-03-15 12:29:07] Final predictions calculated for ladies
INFO [2025-03-15 12:29:07] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250316/ladies_position_probabilities.xlsx
INFO [2025-03-15 12:29:07] Saved ladies points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250316/ladies-points.xlsx
INFO [2025-03-15 12:29:07] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250316/top_contenders.xlsx
INFO [2025-03-15 12:33:58] Starting race predictions process
INFO [2025-03-15 12:33:58] Reading races data
INFO [2025-03-15 12:33:58] Looking for races on: 2025-03-16
INFO [2025-03-15 12:33:58] Found 2 races scheduled for tomorrow
INFO [2025-03-15 12:33:58] Men racing tomorrow: TRUE
INFO [2025-03-15 12:33:58] Ladies racing tomorrow: TRUE
INFO [2025-03-15 12:33:58] Found 1 men's races
INFO [2025-03-15 12:33:58] Found 1 ladies' races
INFO [2025-03-15 12:33:58] Loading men's startlist
INFO [2025-03-15 12:33:58] Loaded 82 skiers in men's startlist
INFO [2025-03-15 12:33:58] Loading ladies' startlist
INFO [2025-03-15 12:33:58] Loaded 54 skiers in ladies' startlist
INFO [2025-03-15 12:33:59] Processing men's predictions
INFO [2025-03-15 12:34:00] Processing men data
INFO [2025-03-15 12:34:00] Using WORLD CUP points system for tomorrow's races
INFO [2025-03-15 12:34:04] Processing men race 1: 20 C
INFO [2025-03-15 12:34:04] Using World Cup points for this race
INFO [2025-03-15 12:34:06] Creating model for top 1 positions
INFO [2025-03-15 12:34:07] Brier score for threshold 1 : 0.0112
INFO [2025-03-15 12:34:07] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:34:08] Creating model for top 3 positions
INFO [2025-03-15 12:34:11] Brier score for threshold 3 : 0.029
INFO [2025-03-15 12:34:11] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-15 12:34:13] Creating model for top 5 positions
INFO [2025-03-15 12:34:15] Brier score for threshold 5 : 0.0439
INFO [2025-03-15 12:34:15] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-15 12:34:17] Creating model for top 10 positions
INFO [2025-03-15 12:34:20] Brier score for threshold 10 : 0.0723
INFO [2025-03-15 12:34:20] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-15 12:34:21] Creating model for top 30 positions
INFO [2025-03-15 12:34:24] Brier score for threshold 30 : 0.1324
INFO [2025-03-15 12:34:24] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:34:26] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-15 12:34:26] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-15 12:34:26] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-15 12:34:26] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-15 12:34:26] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-15 12:34:26] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-15 12:34:26] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-15 12:34:26] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-15 12:34:26] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-15 12:34:26] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-15 12:34:26] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-15 12:34:26] Calculated percentage for Distance_Elo
INFO [2025-03-15 12:34:26] Calculated percentage for Distance_C_Elo
INFO [2025-03-15 12:34:26] Calculated percentage for Distance_F_Elo
INFO [2025-03-15 12:34:26] Calculated percentage for Elo
INFO [2025-03-15 12:34:26] Calculated percentage for Sprint_Elo
INFO [2025-03-15 12:34:26] Calculated percentage for Sprint_C_Elo
INFO [2025-03-15 12:34:26] Calculated percentage for Sprint_F_Elo
INFO [2025-03-15 12:34:26] Calculated percentage for Freestyle_Elo
INFO [2025-03-15 12:34:26] Calculated percentage for Classic_Elo
INFO [2025-03-15 12:34:26] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:34:26] Attempting prediction for threshold 1 with 82 rows
INFO [2025-03-15 12:34:26] Made predictions with adjustments for position threshold 1
INFO [2025-03-15 12:34:26] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-15 12:34:26] Attempting prediction for threshold 3 with 82 rows
INFO [2025-03-15 12:34:26] Made predictions with adjustments for position threshold 3
INFO [2025-03-15 12:34:26] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-15 12:34:26] Attempting prediction for threshold 5 with 82 rows
INFO [2025-03-15 12:34:26] Made predictions with adjustments for position threshold 5
INFO [2025-03-15 12:34:26] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-15 12:34:26] Attempting prediction for threshold 10 with 82 rows
INFO [2025-03-15 12:34:26] Made predictions with adjustments for position threshold 10
INFO [2025-03-15 12:34:26] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:34:26] Attempting prediction for threshold 30 with 82 rows
INFO [2025-03-15 12:34:26] Made predictions with adjustments for position threshold 30
INFO [2025-03-15 12:34:26] Position probability sums BEFORE normalization:
INFO [2025-03-15 12:34:26]   prob_top1: 111.00% (target: 100%)
INFO [2025-03-15 12:34:26]   prob_top3: 323.30% (target: 300%)
INFO [2025-03-15 12:34:26]   prob_top5: 505.80% (target: 500%)
INFO [2025-03-15 12:34:26]   prob_top10: 923.90% (target: 1000%)
INFO [2025-03-15 12:34:26]   prob_top30: 2723.00% (target: 3000%)
INFO [2025-03-15 12:34:26]   prob_top1 normalization: applied scaling factor of 0.9009
INFO [2025-03-15 12:34:26]   prob_top3 normalization: applied scaling factor of 0.9279
INFO [2025-03-15 12:34:26]   prob_top5 normalization: applied scaling factor of 0.9885
INFO [2025-03-15 12:34:26]   prob_top10 normalization: applied scaling factor of 1.0824
INFO [2025-03-15 12:34:26]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-15 12:34:26]   prob_top30 normalization: applied scaling factor of 1.1017
INFO [2025-03-15 12:34:26] Position probability sums AFTER normalization:
INFO [2025-03-15 12:34:26]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-15 12:34:26]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-15 12:34:26]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-15 12:34:26]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-15 12:34:26]   prob_top30: 3000.00% (target: 3000%)
INFO [2025-03-15 12:34:26] Combining race predictions
INFO [2025-03-15 12:34:26] Starting with first race data
INFO [2025-03-15 12:34:26] Calculating totals
INFO [2025-03-15 12:34:26] Returning final predictions
INFO [2025-03-15 12:34:26] Final predictions calculated for men
INFO [2025-03-15 12:34:26] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250316/men_position_probabilities.xlsx
INFO [2025-03-15 12:34:26] Saved men points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250316/men-points.xlsx
INFO [2025-03-15 12:34:26] Processing ladies predictions
INFO [2025-03-15 12:34:26] Processing ladies data
INFO [2025-03-15 12:34:26] Using WORLD CUP points system for tomorrow's races
INFO [2025-03-15 12:34:29] Processing ladies race 1: 20 C
INFO [2025-03-15 12:34:29] Using World Cup points for this race
INFO [2025-03-15 12:34:30] Creating model for top 1 positions
INFO [2025-03-15 12:34:32] Brier score for threshold 1 : 0.0123
INFO [2025-03-15 12:34:32] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:34:33] Creating model for top 3 positions
INFO [2025-03-15 12:34:35] Brier score for threshold 3 : 0.031
INFO [2025-03-15 12:34:35] Variables selected for 3 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:34:36] Creating model for top 5 positions
INFO [2025-03-15 12:34:37] Brier score for threshold 5 : 0.0459
INFO [2025-03-15 12:34:37] Variables selected for 5 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:34:38] Creating model for top 10 positions
INFO [2025-03-15 12:34:39] Brier score for threshold 10 : 0.071
INFO [2025-03-15 12:34:39] Variables selected for 10 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:34:40] Creating model for top 30 positions
INFO [2025-03-15 12:34:42] Brier score for threshold 30 : 0.1264
INFO [2025-03-15 12:34:42] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:34:44] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-15 12:34:44] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-15 12:34:44] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-15 12:34:44] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-15 12:34:44] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-15 12:34:44] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-15 12:34:44] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-15 12:34:44] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-15 12:34:44] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-15 12:34:44] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-15 12:34:44] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-15 12:34:44] Calculated percentage for Distance_Elo
INFO [2025-03-15 12:34:44] Calculated percentage for Distance_C_Elo
INFO [2025-03-15 12:34:44] Calculated percentage for Distance_F_Elo
INFO [2025-03-15 12:34:44] Calculated percentage for Elo
INFO [2025-03-15 12:34:44] Calculated percentage for Sprint_Elo
INFO [2025-03-15 12:34:44] Calculated percentage for Sprint_C_Elo
INFO [2025-03-15 12:34:44] Calculated percentage for Sprint_F_Elo
INFO [2025-03-15 12:34:44] Calculated percentage for Freestyle_Elo
INFO [2025-03-15 12:34:44] Calculated percentage for Classic_Elo
INFO [2025-03-15 12:34:44] Model for threshold 1 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:34:44] Attempting prediction for threshold 1 with 54 rows
INFO [2025-03-15 12:34:44] Made predictions with adjustments for position threshold 1
INFO [2025-03-15 12:34:44] Model for threshold 3 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:34:44] Attempting prediction for threshold 3 with 54 rows
INFO [2025-03-15 12:34:44] Made predictions with adjustments for position threshold 3
INFO [2025-03-15 12:34:44] Model for threshold 5 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:34:44] Attempting prediction for threshold 5 with 54 rows
INFO [2025-03-15 12:34:44] Made predictions with adjustments for position threshold 5
INFO [2025-03-15 12:34:44] Model for threshold 10 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:34:44] Attempting prediction for threshold 10 with 54 rows
INFO [2025-03-15 12:34:44] Made predictions with adjustments for position threshold 10
INFO [2025-03-15 12:34:44] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:34:44] Attempting prediction for threshold 30 with 54 rows
INFO [2025-03-15 12:34:44] Made predictions with adjustments for position threshold 30
INFO [2025-03-15 12:34:44] Position probability sums BEFORE normalization:
INFO [2025-03-15 12:34:44]   prob_top1: 49.30% (target: 100%)
INFO [2025-03-15 12:34:44]   prob_top3: 260.10% (target: 300%)
INFO [2025-03-15 12:34:44]   prob_top5: 457.90% (target: 500%)
INFO [2025-03-15 12:34:44]   prob_top10: 916.30% (target: 1000%)
INFO [2025-03-15 12:34:44]   prob_top30: 2707.60% (target: 3000%)
INFO [2025-03-15 12:34:44]   prob_top1 normalization: applied scaling factor of 2.0284
INFO [2025-03-15 12:34:44]   prob_top3 normalization: applied scaling factor of 1.1534
INFO [2025-03-15 12:34:44]   prob_top5 normalization: applied scaling factor of 1.0919
INFO [2025-03-15 12:34:44]   Capping 2 skiers with >100% probability for prob_top10
INFO [2025-03-15 12:34:44]   prob_top10 normalization: applied scaling factor of 1.0913
INFO [2025-03-15 12:34:44]   Capping 11 skiers with >100% probability for prob_top30
INFO [2025-03-15 12:34:44]   Recursive capping needed after redistribution
INFO [2025-03-15 12:34:44]   prob_top30 normalization: applied scaling factor of 1.1080
WARN [2025-03-15 12:34:44]   prob_top30 sum after capping: 2996.48% (target: 3000.00%)
INFO [2025-03-15 12:34:44] Position probability sums AFTER normalization:
INFO [2025-03-15 12:34:44]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-15 12:34:44]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-15 12:34:44]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-15 12:34:44]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-15 12:34:44]   prob_top30: 2996.48% (target: 3000%)
INFO [2025-03-15 12:34:44] Combining race predictions
INFO [2025-03-15 12:34:44] Starting with first race data
INFO [2025-03-15 12:34:44] Calculating totals
INFO [2025-03-15 12:34:44] Returning final predictions
INFO [2025-03-15 12:34:44] Final predictions calculated for ladies
INFO [2025-03-15 12:34:44] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250316/ladies_position_probabilities.xlsx
INFO [2025-03-15 12:34:44] Saved ladies points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250316/ladies-points.xlsx
INFO [2025-03-15 12:34:44] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250316/top_contenders.xlsx
INFO [2025-03-15 12:35:30] Starting race predictions process
INFO [2025-03-15 12:35:30] Reading races data
INFO [2025-03-15 12:35:30] Looking for races on: 2025-03-16
INFO [2025-03-15 12:35:30] Found 1 races scheduled for tomorrow
INFO [2025-03-15 12:35:30] Men racing tomorrow: FALSE
INFO [2025-03-15 12:35:30] Ladies racing tomorrow: TRUE
INFO [2025-03-15 12:35:30] Found 1 ladies' races
INFO [2025-03-15 12:35:30] Loading ladies' startlist
INFO [2025-03-15 12:35:30] Loaded 54 skiers in ladies' startlist
INFO [2025-03-15 12:35:32] Processing ladies predictions
INFO [2025-03-15 12:35:32] Processing ladies data
INFO [2025-03-15 12:35:32] Using WORLD CUP points system for tomorrow's races
INFO [2025-03-15 12:35:36] Processing ladies race 1: 20 C
INFO [2025-03-15 12:35:36] Using World Cup points for this race
INFO [2025-03-15 12:35:37] Creating model for top 1 positions
INFO [2025-03-15 12:35:39] Brier score for threshold 1 : 0.0123
INFO [2025-03-15 12:35:39] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:35:41] Creating model for top 3 positions
INFO [2025-03-15 12:35:42] Brier score for threshold 3 : 0.031
INFO [2025-03-15 12:35:42] Variables selected for 3 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:35:44] Creating model for top 5 positions
INFO [2025-03-15 12:35:45] Brier score for threshold 5 : 0.0459
INFO [2025-03-15 12:35:45] Variables selected for 5 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:35:46] Creating model for top 10 positions
INFO [2025-03-15 12:35:48] Brier score for threshold 10 : 0.071
INFO [2025-03-15 12:35:48] Variables selected for 10 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:35:49] Creating model for top 30 positions
INFO [2025-03-15 12:35:51] Brier score for threshold 30 : 0.1264
INFO [2025-03-15 12:35:51] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:35:53] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-15 12:35:53] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-15 12:35:53] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-15 12:35:53] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-15 12:35:53] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-15 12:35:53] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-15 12:35:53] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-15 12:35:53] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-15 12:35:53] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-15 12:35:53] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-15 12:35:53] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-15 12:35:53] Calculated percentage for Distance_Elo
INFO [2025-03-15 12:35:53] Calculated percentage for Distance_C_Elo
INFO [2025-03-15 12:35:53] Calculated percentage for Distance_F_Elo
INFO [2025-03-15 12:35:53] Calculated percentage for Elo
INFO [2025-03-15 12:35:53] Calculated percentage for Sprint_Elo
INFO [2025-03-15 12:35:53] Calculated percentage for Sprint_C_Elo
INFO [2025-03-15 12:35:53] Calculated percentage for Sprint_F_Elo
INFO [2025-03-15 12:35:53] Calculated percentage for Freestyle_Elo
INFO [2025-03-15 12:35:53] Calculated percentage for Classic_Elo
INFO [2025-03-15 12:35:53] Model for threshold 1 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:35:53] Attempting prediction for threshold 1 with 54 rows
INFO [2025-03-15 12:35:53] Made predictions with adjustments for position threshold 1
INFO [2025-03-15 12:35:53] Model for threshold 3 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:35:53] Attempting prediction for threshold 3 with 54 rows
INFO [2025-03-15 12:35:53] Made predictions with adjustments for position threshold 3
INFO [2025-03-15 12:35:53] Model for threshold 5 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:35:53] Attempting prediction for threshold 5 with 54 rows
INFO [2025-03-15 12:35:53] Made predictions with adjustments for position threshold 5
INFO [2025-03-15 12:35:53] Model for threshold 10 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-15 12:35:53] Attempting prediction for threshold 10 with 54 rows
INFO [2025-03-15 12:35:53] Made predictions with adjustments for position threshold 10
INFO [2025-03-15 12:35:53] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-15 12:35:53] Attempting prediction for threshold 30 with 54 rows
INFO [2025-03-15 12:35:53] Made predictions with adjustments for position threshold 30
INFO [2025-03-15 12:35:53] Position probability sums BEFORE normalization:
INFO [2025-03-15 12:35:53]   prob_top1: 49.30% (target: 100%)
INFO [2025-03-15 12:35:53]   prob_top3: 260.10% (target: 300%)
INFO [2025-03-15 12:35:53]   prob_top5: 457.90% (target: 500%)
INFO [2025-03-15 12:35:53]   prob_top10: 916.30% (target: 1000%)
INFO [2025-03-15 12:35:53]   prob_top30: 2707.60% (target: 3000%)
INFO [2025-03-15 12:35:53]   prob_top1 normalization: applied scaling factor of 2.0284
INFO [2025-03-15 12:35:53]   prob_top3 normalization: applied scaling factor of 1.1534
INFO [2025-03-15 12:35:53]   prob_top5 normalization: applied scaling factor of 1.0919
INFO [2025-03-15 12:35:53]   Capping 2 skiers with >100% probability for prob_top10
INFO [2025-03-15 12:35:53]   prob_top10 normalization: applied scaling factor of 1.0913
INFO [2025-03-15 12:35:53]   Capping 11 skiers with >100% probability for prob_top30
INFO [2025-03-15 12:35:53]   Recursive capping needed after redistribution
INFO [2025-03-15 12:35:53]   prob_top30 normalization: applied scaling factor of 1.1080
WARN [2025-03-15 12:35:53]   prob_top30 sum after capping: 2996.48% (target: 3000.00%)
INFO [2025-03-15 12:35:53] Position probability sums AFTER normalization:
INFO [2025-03-15 12:35:53]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-15 12:35:53]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-15 12:35:53]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-15 12:35:53]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-15 12:35:53]   prob_top30: 2996.48% (target: 3000%)
INFO [2025-03-15 12:35:53] Combining race predictions
INFO [2025-03-15 12:35:53] Starting with first race data
INFO [2025-03-15 12:35:53] Calculating totals
INFO [2025-03-15 12:35:53] Returning final predictions
INFO [2025-03-15 12:35:53] Final predictions calculated for ladies
INFO [2025-03-15 12:35:53] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250316/ladies_position_probabilities.xlsx
INFO [2025-03-15 12:35:53] Saved ladies points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250316/ladies-points.xlsx
INFO [2025-03-15 12:35:53] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250316/top_contenders.xlsx
INFO [2025-03-26 08:39:46] Starting race predictions process
INFO [2025-03-26 08:39:46] Reading races data
INFO [2025-03-26 08:39:46] Looking for races on: 2025-03-26
INFO [2025-03-26 08:39:46] No races scheduled for tomorrow
INFO [2025-03-28 21:29:34] Starting race day predictions process
INFO [2025-03-28 21:29:34] Reading races data
INFO [2025-03-28 21:29:34] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:29:34] No races scheduled for today. Exiting.
INFO [2025-03-28 21:29:46] Starting race day predictions process
INFO [2025-03-28 21:29:46] Reading races data
INFO [2025-03-28 21:29:46] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:29:46] No races scheduled for today. Exiting.
INFO [2025-03-28 21:30:01] Starting race day predictions process
INFO [2025-03-28 21:30:01] Reading races data
INFO [2025-03-28 21:30:01] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:30:01] No races scheduled for today. Exiting.
INFO [2025-03-28 21:30:33] Starting race day predictions process
INFO [2025-03-28 21:30:33] Reading races data
INFO [2025-03-28 21:30:33] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:30:34] No races scheduled for today. Exiting.
INFO [2025-03-28 21:30:55] Starting race day predictions process
INFO [2025-03-28 21:30:57] Reading races data
INFO [2025-03-28 21:31:10] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:33:06] Starting race day predictions process
INFO [2025-03-28 21:33:06] Reading races data
INFO [2025-03-28 21:33:06] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:33:06] Found 2 races scheduled for today
INFO [2025-03-28 21:33:06] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:33:06] Reading race startlists
INFO [2025-03-28 21:33:07] Starting race-picks.R execution
INFO [2025-03-28 21:33:07] Running race day predictions workflow
INFO [2025-03-28 21:33:07] Processing men's predictions
INFO [2025-03-28 21:33:07] Processing men data
INFO [2025-03-28 21:33:07] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:33:11] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:33:11] Processing men race 1: 50 C
INFO [2025-03-28 21:33:11] Using World Cup points for this race
INFO [2025-03-28 21:33:11] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:33:11]   Mean: 1
INFO [2025-03-28 21:33:11]   Sum: 75
INFO [2025-03-28 21:33:13] Creating model for top 1 positions
INFO [2025-03-28 21:33:14] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 21:33:14] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:33:15] Creating model for top 3 positions
INFO [2025-03-28 21:33:17] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 21:33:17] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:33:19] Creating model for top 5 positions
INFO [2025-03-28 21:33:20] Brier score for threshold 5 : 0.044
INFO [2025-03-28 21:33:20] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:33:22] Creating model for top 10 positions
INFO [2025-03-28 21:33:24] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 21:33:24] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:33:26] Creating model for top 30 positions
INFO [2025-03-28 21:33:28] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 21:33:28] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:33:30] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:33:30] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:33:30] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:33:30] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:33:30] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:33:30] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:33:30] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:33:30] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:33:30] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:33:30] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:33:30] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:33:30] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:33:30] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:33:30] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:33:30] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:33:30] Calculated percentage for Elo
INFO [2025-03-28 21:33:30] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:33:30] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:33:30] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:33:30] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:33:30] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:33:30] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:33:30]   Mean: 1
INFO [2025-03-28 21:33:30]   Sum: 75
INFO [2025-03-28 21:33:30]   Max: 1
INFO [2025-03-28 21:33:30] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:33:30] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:33:30] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 21:33:30] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:33:30] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:33:30] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 21:33:30] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:33:30] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:33:30] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 21:33:30] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:33:30] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:33:30] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 21:33:30] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:33:30] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:33:30] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 21:33:30] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:33:30] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:33:30]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 21:33:30]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 21:33:30]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 21:33:30]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 21:33:30]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 21:33:30]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 21:33:30]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 21:33:30]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 21:33:30]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 21:33:30]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 21:33:30]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 21:33:30]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 21:33:30]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:33:30]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 21:33:30]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 21:33:30]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:33:30]   Recursive capping needed after redistribution
INFO [2025-03-28 21:33:30]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 21:33:30]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 21:33:30] Position probability sums AFTER normalization:
INFO [2025-03-28 21:33:30]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:33:30]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:33:30]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:33:30]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 21:33:30]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 21:33:30] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:33:30]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:33:30]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:33:30]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:33:30]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:33:30]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:33:30]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:33:30]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 21:33:30]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:33:30]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 21:33:30]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:33:30] Race 1 probability check:
INFO [2025-03-28 21:33:30] Combining race predictions
INFO [2025-03-28 21:33:30] Starting with first race data
INFO [2025-03-28 21:33:30] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:33:30]   Mean: 1
INFO [2025-03-28 21:33:30]   Sum: 75
INFO [2025-03-28 21:33:30] Calculating totals with probability weighting
INFO [2025-03-28 21:33:30] Returning final predictions
INFO [2025-03-28 21:33:30] Final predictions calculated for men
INFO [2025-03-28 21:33:40] Starting race day predictions process
INFO [2025-03-28 21:33:40] Reading races data
INFO [2025-03-28 21:33:40] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:33:41] Found 2 races scheduled for today
INFO [2025-03-28 21:33:44] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:33:45] Reading race startlists
INFO [2025-03-28 21:33:50] Starting race-picks.R execution
INFO [2025-03-28 21:33:50] Running race day predictions workflow
INFO [2025-03-28 21:33:50] Processing men's predictions
INFO [2025-03-28 21:33:50] Processing men data
INFO [2025-03-28 21:33:50] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:33:55] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:33:55] Processing men race 1: 50 C
INFO [2025-03-28 21:33:55] Using World Cup points for this race
INFO [2025-03-28 21:33:55] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:33:55]   Mean: 1
INFO [2025-03-28 21:33:55]   Sum: 75
INFO [2025-03-28 21:33:56] Creating model for top 1 positions
INFO [2025-03-28 21:33:58] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 21:33:58] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:33:59] Creating model for top 3 positions
INFO [2025-03-28 21:34:02] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 21:34:02] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:34:03] Creating model for top 5 positions
INFO [2025-03-28 21:34:05] Brier score for threshold 5 : 0.044
INFO [2025-03-28 21:34:05] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:34:06] Creating model for top 10 positions
INFO [2025-03-28 21:34:08] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 21:34:08] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:34:10] Creating model for top 30 positions
INFO [2025-03-28 21:34:12] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 21:34:12] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:34:14] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:34:14] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:34:14] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:34:14] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:34:14] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:34:14] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:34:14] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:34:14] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:34:14] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:34:14] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:34:14] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:34:14] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:34:14] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:34:14] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:34:14] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:34:14] Calculated percentage for Elo
INFO [2025-03-28 21:34:14] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:34:14] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:34:14] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:34:14] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:34:14] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:34:14] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:34:14]   Mean: 1
INFO [2025-03-28 21:34:14]   Sum: 75
INFO [2025-03-28 21:34:14]   Max: 1
INFO [2025-03-28 21:34:14] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:34:14] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:34:14] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 21:34:14] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:34:14] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:34:14] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 21:34:14] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:34:14] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:34:14] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 21:34:14] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:34:14] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:34:14] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 21:34:14] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:34:14] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:34:14] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 21:34:14] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:34:14] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:34:14]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 21:34:14]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 21:34:14]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 21:34:14]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 21:34:14]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 21:34:14]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 21:34:14]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 21:34:14]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 21:34:14]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 21:34:14]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 21:34:14]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 21:34:14]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 21:34:14]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:34:14]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 21:34:14]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 21:34:14]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:34:14]   Recursive capping needed after redistribution
INFO [2025-03-28 21:34:14]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 21:34:14]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 21:34:14] Position probability sums AFTER normalization:
INFO [2025-03-28 21:34:14]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:34:14]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:34:14]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:34:14]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 21:34:14]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 21:34:14] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:34:14]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:34:14]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:34:14]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:34:14]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:34:14]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:34:14]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:34:14]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 21:34:14]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:34:14]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 21:34:14]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:34:14] Race 1 probability check:
INFO [2025-03-28 21:34:15] Combining race predictions
INFO [2025-03-28 21:34:15] Starting with first race data
INFO [2025-03-28 21:34:15] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:34:15]   Mean: 1
INFO [2025-03-28 21:34:15]   Sum: 75
INFO [2025-03-28 21:34:15] Calculating totals with probability weighting
INFO [2025-03-28 21:34:15] Returning final predictions
INFO [2025-03-28 21:34:15] Final predictions calculated for men
INFO [2025-03-28 21:34:15] race-picks.R execution complete
INFO [2025-03-28 21:35:11] Starting race day predictions process
INFO [2025-03-28 21:35:11] Reading races data
INFO [2025-03-28 21:35:11] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:35:11] Found 2 races scheduled for today
INFO [2025-03-28 21:35:11] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:35:11] Reading race startlists
INFO [2025-03-28 21:35:11] Starting race-picks.R execution
INFO [2025-03-28 21:35:11] Running race day predictions workflow
INFO [2025-03-28 21:35:11] Processing men's predictions
INFO [2025-03-28 21:35:11] Processing men data
INFO [2025-03-28 21:35:11] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:35:15] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:35:15] Processing men race 1: 50 C
INFO [2025-03-28 21:35:15] Using World Cup points for this race
INFO [2025-03-28 21:35:15] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:35:15]   Mean: 1
INFO [2025-03-28 21:35:15]   Sum: 75
INFO [2025-03-28 21:35:17] Creating model for top 1 positions
INFO [2025-03-28 21:35:18] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 21:35:18] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:35:19] Creating model for top 3 positions
INFO [2025-03-28 21:35:22] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 21:35:22] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:35:23] Creating model for top 5 positions
INFO [2025-03-28 21:35:25] Brier score for threshold 5 : 0.044
INFO [2025-03-28 21:35:25] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:35:26] Creating model for top 10 positions
INFO [2025-03-28 21:35:29] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 21:35:29] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:35:30] Creating model for top 30 positions
INFO [2025-03-28 21:35:32] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 21:35:32] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:35:35] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:35:35] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:35:35] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:35:35] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:35:35] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:35:35] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:35:35] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:35:35] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:35:35] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:35:35] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:35:35] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:35:35] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:35:35] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:35:35] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:35:35] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:35:35] Calculated percentage for Elo
INFO [2025-03-28 21:35:35] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:35:35] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:35:35] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:35:35] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:35:35] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:35:35] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:35:35]   Mean: 1
INFO [2025-03-28 21:35:35]   Sum: 75
INFO [2025-03-28 21:35:35]   Max: 1
INFO [2025-03-28 21:35:35] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:35:35] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:35:35] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 21:35:35] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:35:35] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:35:35] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 21:35:35] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:35:35] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:35:35] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 21:35:35] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:35:35] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:35:35] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 21:35:35] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:35:35] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:35:35] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 21:35:35] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:35:35] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:35:35]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 21:35:35]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 21:35:35]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 21:35:35]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 21:35:35]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 21:35:35]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 21:35:35]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 21:35:35]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 21:35:35]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 21:35:35]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 21:35:35]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 21:35:35]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 21:35:35]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:35:35]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 21:35:35]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 21:35:35]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:35:35]   Recursive capping needed after redistribution
INFO [2025-03-28 21:35:35]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 21:35:35]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 21:35:35] Position probability sums AFTER normalization:
INFO [2025-03-28 21:35:35]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:35:35]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:35:35]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:35:35]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 21:35:35]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 21:35:35] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:35:35]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:35:35]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:35:35]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:35:35]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:35:35]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:35:35]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:35:35]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 21:35:35]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:35:35]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 21:35:35]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:35:35] Race 1 probability check:
INFO [2025-03-28 21:35:35] Combining race predictions
INFO [2025-03-28 21:35:35] Starting with first race data
INFO [2025-03-28 21:35:35] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:35:35]   Mean: 1
INFO [2025-03-28 21:35:35]   Sum: 75
INFO [2025-03-28 21:35:35] Calculating totals with probability weighting
INFO [2025-03-28 21:35:35] Returning final predictions
INFO [2025-03-28 21:35:35] Final predictions calculated for men
INFO [2025-03-28 21:37:51] Starting race day predictions process
INFO [2025-03-28 21:37:51] Reading races data
INFO [2025-03-28 21:37:51] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:37:51] Found 2 races scheduled for today
INFO [2025-03-28 21:37:51] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:37:51] Reading race startlists
INFO [2025-03-28 21:37:51] Starting race-picks.R execution
INFO [2025-03-28 21:37:51] Running race day predictions workflow
INFO [2025-03-28 21:37:51] Processing men's predictions
INFO [2025-03-28 21:37:51] Processing men data
INFO [2025-03-28 21:37:51] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:37:56] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:37:56] Processing men race 1: 50 C
INFO [2025-03-28 21:37:56] Using World Cup points for this race
INFO [2025-03-28 21:37:56] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:37:56]   Mean: 1
INFO [2025-03-28 21:37:56]   Sum: 75
INFO [2025-03-28 21:37:57] Creating model for top 1 positions
INFO [2025-03-28 21:37:58] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 21:37:58] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:37:59] Creating model for top 3 positions
INFO [2025-03-28 21:38:02] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 21:38:02] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:38:03] Creating model for top 5 positions
INFO [2025-03-28 21:38:05] Brier score for threshold 5 : 0.044
INFO [2025-03-28 21:38:05] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:38:06] Creating model for top 10 positions
INFO [2025-03-28 21:38:09] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 21:38:09] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:38:10] Creating model for top 30 positions
INFO [2025-03-28 21:38:12] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 21:38:12] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:38:15] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:38:15] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:38:15] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:38:15] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:38:15] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:38:15] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:38:15] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:38:15] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:38:15] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:38:15] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:38:15] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:38:15] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:38:15] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:38:15] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:38:15] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:38:15] Calculated percentage for Elo
INFO [2025-03-28 21:38:15] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:38:15] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:38:15] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:38:15] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:38:15] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:38:15] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:38:15]   Mean: 1
INFO [2025-03-28 21:38:15]   Sum: 75
INFO [2025-03-28 21:38:15]   Max: 1
INFO [2025-03-28 21:38:15] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:38:15] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:38:15] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 21:38:15] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:38:15] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:38:15] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 21:38:15] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:38:15] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:38:15] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 21:38:15] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:38:15] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:38:15] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 21:38:15] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:38:15] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:38:15] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 21:38:15] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:38:15] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:38:15]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 21:38:15]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 21:38:15]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 21:38:15]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 21:38:15]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 21:38:15]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 21:38:15]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 21:38:15]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 21:38:15]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 21:38:15]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 21:38:15]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 21:38:15]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 21:38:15]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:38:15]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 21:38:15]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 21:38:15]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:38:15]   Recursive capping needed after redistribution
INFO [2025-03-28 21:38:15]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 21:38:15]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 21:38:15] Position probability sums AFTER normalization:
INFO [2025-03-28 21:38:15]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:38:15]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:38:15]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:38:15]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 21:38:15]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 21:38:15] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:38:15]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:38:15]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:38:15]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:38:15]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:38:15]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:38:15]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:38:15]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 21:38:15]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:38:15]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 21:38:15]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:38:15] Race 1 probability check:
INFO [2025-03-28 21:38:15] Combining race predictions
INFO [2025-03-28 21:38:15] Starting with first race data
INFO [2025-03-28 21:38:15] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:38:15]   Mean: 1
INFO [2025-03-28 21:38:15]   Sum: 75
INFO [2025-03-28 21:38:15] Calculating totals with probability weighting
INFO [2025-03-28 21:38:15] Returning final predictions
INFO [2025-03-28 21:38:15] Final predictions calculated for men
INFO [2025-03-28 21:39:27] Starting race day predictions process
INFO [2025-03-28 21:39:27] Reading races data
INFO [2025-03-28 21:39:27] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:39:27] Found 2 races scheduled for today
INFO [2025-03-28 21:39:27] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:39:27] Reading race startlists
INFO [2025-03-28 21:39:27] Starting race-picks.R execution
INFO [2025-03-28 21:39:27] Running race day predictions workflow
INFO [2025-03-28 21:39:27] Processing men's predictions
INFO [2025-03-28 21:39:28] Processing men data
INFO [2025-03-28 21:39:28] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:39:32] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:39:32] Processing men race 1: 50 C
INFO [2025-03-28 21:39:32] Using World Cup points for this race
INFO [2025-03-28 21:39:32] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:39:32]   Mean: 1
INFO [2025-03-28 21:39:32]   Sum: 75
INFO [2025-03-28 21:39:33] Creating model for top 1 positions
INFO [2025-03-28 21:39:35] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 21:39:35] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:39:36] Creating model for top 3 positions
INFO [2025-03-28 21:39:39] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 21:39:39] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:39:40] Creating model for top 5 positions
INFO [2025-03-28 21:39:42] Brier score for threshold 5 : 0.044
INFO [2025-03-28 21:39:42] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:39:43] Creating model for top 10 positions
INFO [2025-03-28 21:39:45] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 21:39:45] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:39:47] Creating model for top 30 positions
INFO [2025-03-28 21:39:49] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 21:39:49] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:39:51] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:39:51] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:39:51] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:39:51] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:39:51] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:39:51] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:39:51] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:39:51] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:39:51] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:39:51] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:39:51] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:39:51] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:39:51] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:39:51] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:39:51] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:39:51] Calculated percentage for Elo
INFO [2025-03-28 21:39:51] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:39:51] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:39:51] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:39:51] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:39:51] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:39:51] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:39:51]   Mean: 1
INFO [2025-03-28 21:39:51]   Sum: 75
INFO [2025-03-28 21:39:51]   Max: 1
INFO [2025-03-28 21:39:51] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:39:51] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:39:51] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 21:39:51] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:39:51] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:39:51] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 21:39:51] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:39:51] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:39:51] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 21:39:51] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:39:51] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:39:51] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 21:39:51] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:39:51] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:39:51] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 21:39:51] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:39:51] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:39:51]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 21:39:51]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 21:39:51]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 21:39:51]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 21:39:51]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 21:39:51]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 21:39:51]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 21:39:51]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 21:39:51]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 21:39:51]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 21:39:51]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 21:39:51]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 21:39:51]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:39:51]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 21:39:51]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 21:39:51]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:39:51]   Recursive capping needed after redistribution
INFO [2025-03-28 21:39:51]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 21:39:51]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 21:39:51] Position probability sums AFTER normalization:
INFO [2025-03-28 21:39:51]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:39:51]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:39:51]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:39:51]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 21:39:51]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 21:39:51] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:39:51]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:39:51]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:39:51]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:39:51]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:39:51]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:39:51]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:39:51]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 21:39:51]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:39:51]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 21:39:51]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:39:51] Race 1 probability check:
INFO [2025-03-28 21:39:51] Combining race predictions
INFO [2025-03-28 21:39:51] Starting with first race data
INFO [2025-03-28 21:39:51] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:39:51]   Mean: 1
INFO [2025-03-28 21:39:51]   Sum: 75
INFO [2025-03-28 21:39:51] Calculating totals with probability weighting
INFO [2025-03-28 21:39:51] Returning final predictions
INFO [2025-03-28 21:39:51] Final predictions calculated for men
INFO [2025-03-28 21:42:47] Starting race day predictions process
INFO [2025-03-28 21:42:47] Reading races data
INFO [2025-03-28 21:42:47] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:42:47] Found 2 races scheduled for today
INFO [2025-03-28 21:42:47] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:42:47] Reading race startlists
INFO [2025-03-28 21:42:47] Starting race-picks.R execution
INFO [2025-03-28 21:42:47] Running race day predictions workflow
INFO [2025-03-28 21:42:47] Processing men's predictions
INFO [2025-03-28 21:42:47] Processing men data
INFO [2025-03-28 21:42:47] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:42:52] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:42:52] Processing men race 1: 50 C
INFO [2025-03-28 21:42:52] Using World Cup points for this race
INFO [2025-03-28 21:42:52] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:42:52]   Mean: 1
INFO [2025-03-28 21:42:52]   Sum: 75
INFO [2025-03-28 21:42:53] Creating model for top 1 positions
INFO [2025-03-28 21:42:54] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 21:42:54] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:42:56] Creating model for top 3 positions
INFO [2025-03-28 21:42:58] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 21:42:58] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:43:00] Creating model for top 5 positions
INFO [2025-03-28 21:43:01] Brier score for threshold 5 : 0.044
INFO [2025-03-28 21:43:01] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:43:03] Creating model for top 10 positions
INFO [2025-03-28 21:43:05] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 21:43:05] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:43:07] Creating model for top 30 positions
INFO [2025-03-28 21:43:09] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 21:43:09] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:43:11] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:43:11] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:43:11] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:43:11] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:43:11] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:43:11] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:43:11] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:43:11] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:43:11] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:43:11] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:43:11] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:43:11] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:43:11] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:43:11] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:43:11] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:43:11] Calculated percentage for Elo
INFO [2025-03-28 21:43:11] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:43:11] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:43:11] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:43:11] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:43:11] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:43:11] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:43:11]   Mean: 1
INFO [2025-03-28 21:43:11]   Sum: 75
INFO [2025-03-28 21:43:11]   Max: 1
INFO [2025-03-28 21:43:11] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:43:11] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:43:11] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 21:43:11] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:43:11] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:43:11] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 21:43:11] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:43:11] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:43:11] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 21:43:11] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:43:11] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:43:11] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 21:43:11] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:43:11] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:43:11] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 21:43:11] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:43:11] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:43:11]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 21:43:11]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 21:43:11]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 21:43:11]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 21:43:11]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 21:43:11]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 21:43:11]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 21:43:11]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 21:43:11]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 21:43:11]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 21:43:11]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 21:43:11]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 21:43:11]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:43:11]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 21:43:11]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 21:43:11]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:43:11]   Recursive capping needed after redistribution
INFO [2025-03-28 21:43:11]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 21:43:11]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 21:43:11] Position probability sums AFTER normalization:
INFO [2025-03-28 21:43:11]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:43:11]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:43:11]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:43:11]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 21:43:11]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 21:43:11] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:43:11]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:43:11]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:43:11]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:43:11]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:43:11]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:43:11]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:43:11]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 21:43:11]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:43:11]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 21:43:11]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:43:11] Race 1 probability check:
INFO [2025-03-28 21:43:11] Combining race predictions
INFO [2025-03-28 21:43:11] Starting with first race data
INFO [2025-03-28 21:43:11] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:43:11]   Mean: 1
INFO [2025-03-28 21:43:11]   Sum: 75
INFO [2025-03-28 21:43:11] Calculating totals with probability weighting
INFO [2025-03-28 21:43:11] Returning final predictions
INFO [2025-03-28 21:43:11] Final predictions calculated for men
INFO [2025-03-28 21:44:59] Starting race day predictions process
INFO [2025-03-28 21:44:59] Reading races data
INFO [2025-03-28 21:44:59] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:44:59] Found 2 races scheduled for today
INFO [2025-03-28 21:44:59] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:44:59] Reading race startlists
INFO [2025-03-28 21:44:59] Starting race-picks.R execution
INFO [2025-03-28 21:44:59] Running race day predictions workflow
INFO [2025-03-28 21:44:59] Processing men's predictions
INFO [2025-03-28 21:44:59] Processing men data
INFO [2025-03-28 21:44:59] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:45:03] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:45:03] Processing men race 1: 50 C
INFO [2025-03-28 21:45:03] Using World Cup points for this race
INFO [2025-03-28 21:45:03] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:45:03]   Mean: 1
INFO [2025-03-28 21:45:03]   Sum: 75
INFO [2025-03-28 21:45:05] Creating model for top 1 positions
INFO [2025-03-28 21:45:06] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 21:45:06] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:45:07] Creating model for top 3 positions
INFO [2025-03-28 21:45:10] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 21:45:10] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:45:11] Creating model for top 5 positions
INFO [2025-03-28 21:45:13] Brier score for threshold 5 : 0.044
INFO [2025-03-28 21:45:13] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:45:14] Creating model for top 10 positions
INFO [2025-03-28 21:45:17] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 21:45:17] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:45:18] Creating model for top 30 positions
INFO [2025-03-28 21:45:20] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 21:45:20] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:45:22] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:45:22] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:45:22] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:45:22] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:45:22] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:45:22] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:45:22] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:45:22] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:45:22] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:45:22] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:45:22] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:45:22] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:45:22] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:45:22] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:45:22] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:45:22] Calculated percentage for Elo
INFO [2025-03-28 21:45:22] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:45:22] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:45:22] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:45:22] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:45:22] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:45:22] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:45:22]   Mean: 1
INFO [2025-03-28 21:45:22]   Sum: 75
INFO [2025-03-28 21:45:22]   Max: 1
INFO [2025-03-28 21:45:22] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:45:22] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:45:22] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 21:45:22] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:45:22] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:45:22] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 21:45:22] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:45:22] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:45:22] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 21:45:22] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:45:22] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:45:22] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 21:45:22] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:45:22] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:45:22] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 21:45:22] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:45:23] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:45:23]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 21:45:23]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 21:45:23]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 21:45:23]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 21:45:23]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 21:45:23]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 21:45:23]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 21:45:23]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 21:45:23]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 21:45:23]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 21:45:23]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 21:45:23]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 21:45:23]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:45:23]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 21:45:23]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 21:45:23]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:45:23]   Recursive capping needed after redistribution
INFO [2025-03-28 21:45:23]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 21:45:23]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 21:45:23] Position probability sums AFTER normalization:
INFO [2025-03-28 21:45:23]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:45:23]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:45:23]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:45:23]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 21:45:23]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 21:45:23] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:45:23]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:45:23]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:45:23]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:45:23]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:45:23]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:45:23]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:45:23]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 21:45:23]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:45:23]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 21:45:23]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:45:23] Race 1 probability check:
INFO [2025-03-28 21:45:23] Combining race predictions
INFO [2025-03-28 21:45:23] Starting with first race data
INFO [2025-03-28 21:45:23] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:45:23]   Mean: 1
INFO [2025-03-28 21:45:23]   Sum: 75
INFO [2025-03-28 21:45:23] Calculating totals with probability weighting
INFO [2025-03-28 21:45:23] Returning final predictions
INFO [2025-03-28 21:45:23] Final predictions calculated for men
INFO [2025-03-28 21:45:48] Starting race day predictions process
INFO [2025-03-28 21:45:48] Reading races data
INFO [2025-03-28 21:45:48] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:45:48] Found 2 races scheduled for today
INFO [2025-03-28 21:45:48] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:45:48] Reading race startlists
INFO [2025-03-28 21:45:48] Starting race-picks.R execution
INFO [2025-03-28 21:45:48] Running race day predictions workflow
INFO [2025-03-28 21:45:48] Processing men's predictions
INFO [2025-03-28 21:45:49] Processing men data
INFO [2025-03-28 21:45:49] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:45:53] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:45:53] Processing men race 1: 50 C
INFO [2025-03-28 21:45:53] Using World Cup points for this race
INFO [2025-03-28 21:45:53] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:45:53]   Mean: 1
INFO [2025-03-28 21:45:53]   Sum: 75
INFO [2025-03-28 21:45:54] Creating model for top 1 positions
INFO [2025-03-28 21:45:55] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 21:45:55] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:45:57] Creating model for top 3 positions
INFO [2025-03-28 21:45:59] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 21:45:59] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:46:01] Creating model for top 5 positions
INFO [2025-03-28 21:46:02] Brier score for threshold 5 : 0.044
INFO [2025-03-28 21:46:02] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:46:04] Creating model for top 10 positions
INFO [2025-03-28 21:46:06] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 21:46:06] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:46:08] Creating model for top 30 positions
INFO [2025-03-28 21:46:09] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 21:46:09] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:46:12] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:46:12] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:46:12] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:46:12] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:46:12] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:46:12] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:46:12] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:46:12] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:46:12] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:46:12] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:46:12] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:46:12] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:46:12] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:46:12] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:46:12] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:46:12] Calculated percentage for Elo
INFO [2025-03-28 21:46:12] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:46:12] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:46:12] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:46:12] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:46:12] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:46:12] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:46:12]   Mean: 1
INFO [2025-03-28 21:46:12]   Sum: 75
INFO [2025-03-28 21:46:12]   Max: 1
INFO [2025-03-28 21:46:12] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:46:12] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:46:12] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 21:46:12] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:46:12] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:46:12] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 21:46:12] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:46:12] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:46:12] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 21:46:12] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:46:12] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:46:12] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 21:46:12] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:46:12] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:46:12] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 21:46:12] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:46:12] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:46:12]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 21:46:12]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 21:46:12]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 21:46:12]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 21:46:12]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 21:46:12]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 21:46:12]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 21:46:12]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 21:46:12]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 21:46:12]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 21:46:12]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 21:46:12]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 21:46:12]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:46:12]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 21:46:12]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 21:46:12]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:46:12]   Recursive capping needed after redistribution
INFO [2025-03-28 21:46:12]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 21:46:12]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 21:46:12] Position probability sums AFTER normalization:
INFO [2025-03-28 21:46:12]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:46:12]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:46:12]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:46:12]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 21:46:12]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 21:46:12] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:46:12]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:46:12]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:46:12]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:46:12]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:46:12]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:46:12]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:46:12]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 21:46:12]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:46:12]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 21:46:12]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:46:12] Race 1 probability check:
INFO [2025-03-28 21:46:12] Combining race predictions
INFO [2025-03-28 21:46:12] Starting with first race data
INFO [2025-03-28 21:46:12] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:46:12]   Mean: 1
INFO [2025-03-28 21:46:12]   Sum: 75
INFO [2025-03-28 21:46:12] Calculating totals with probability weighting
INFO [2025-03-28 21:46:12] Returning final predictions
INFO [2025-03-28 21:46:12] Final predictions calculated for men
INFO [2025-03-28 21:46:54] Starting race day predictions process
INFO [2025-03-28 21:46:54] Reading races data
INFO [2025-03-28 21:46:54] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:46:54] Found 2 races scheduled for today
INFO [2025-03-28 21:46:54] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:46:54] Reading race startlists
INFO [2025-03-28 21:46:54] Starting race-picks.R execution
INFO [2025-03-28 21:46:54] Running race day predictions workflow
INFO [2025-03-28 21:46:54] Processing men's predictions
INFO [2025-03-28 21:46:54] Processing men data
INFO [2025-03-28 21:46:54] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:46:58] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:46:58] Processing men race 1: 50 C
INFO [2025-03-28 21:46:58] Using World Cup points for this race
INFO [2025-03-28 21:46:58] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:46:58]   Mean: 1
INFO [2025-03-28 21:46:58]   Sum: 75
INFO [2025-03-28 21:47:00] Creating model for top 1 positions
INFO [2025-03-28 21:47:01] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 21:47:01] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:47:02] Creating model for top 3 positions
INFO [2025-03-28 21:47:04] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 21:47:04] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:47:06] Creating model for top 5 positions
INFO [2025-03-28 21:47:07] Brier score for threshold 5 : 0.044
INFO [2025-03-28 21:47:07] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:47:09] Creating model for top 10 positions
INFO [2025-03-28 21:47:11] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 21:47:11] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:47:13] Creating model for top 30 positions
INFO [2025-03-28 21:47:15] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 21:47:15] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:47:17] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:47:17] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:47:17] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:47:17] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:47:17] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:47:17] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:47:17] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:47:17] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:47:17] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:47:17] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:47:17] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:47:17] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:47:17] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:47:17] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:47:17] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:47:17] Calculated percentage for Elo
INFO [2025-03-28 21:47:17] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:47:17] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:47:17] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:47:17] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:47:17] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:47:17] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:47:17]   Mean: 1
INFO [2025-03-28 21:47:17]   Sum: 75
INFO [2025-03-28 21:47:17]   Max: 1
INFO [2025-03-28 21:47:17] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:47:17] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:47:17] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 21:47:17] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:47:17] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:47:17] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 21:47:17] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:47:17] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:47:17] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 21:47:17] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:47:17] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:47:17] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 21:47:17] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:47:17] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:47:17] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 21:47:17] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:47:17] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:47:17]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 21:47:17]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 21:47:17]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 21:47:17]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 21:47:17]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 21:47:17]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 21:47:17]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 21:47:17]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 21:47:17]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 21:47:17]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 21:47:17]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 21:47:17]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 21:47:17]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:47:17]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 21:47:17]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 21:47:17]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:47:17]   Recursive capping needed after redistribution
INFO [2025-03-28 21:47:17]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 21:47:17]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 21:47:17] Position probability sums AFTER normalization:
INFO [2025-03-28 21:47:17]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:47:17]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:47:17]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:47:17]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 21:47:17]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 21:47:17] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:47:17]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:47:17]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:47:17]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:47:17]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:47:17]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:47:17]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:47:17]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 21:47:17]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:47:17]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 21:47:17]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:47:17] Race 1 probability check:
INFO [2025-03-28 21:47:17] Combining race predictions
INFO [2025-03-28 21:47:17] Starting with first race data
INFO [2025-03-28 21:47:17] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:47:17]   Mean: 1
INFO [2025-03-28 21:47:17]   Sum: 75
INFO [2025-03-28 21:47:17] Calculating totals with probability weighting
INFO [2025-03-28 21:47:17] Returning final predictions
INFO [2025-03-28 21:47:17] Final predictions calculated for men
INFO [2025-03-28 21:47:53] Starting race day predictions process
INFO [2025-03-28 21:47:53] Reading races data
INFO [2025-03-28 21:47:53] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:47:53] Found 2 races scheduled for today
INFO [2025-03-28 21:47:53] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:47:53] Reading race startlists
INFO [2025-03-28 21:47:53] Starting race-picks.R execution
INFO [2025-03-28 21:47:53] Running race day predictions workflow
INFO [2025-03-28 21:47:53] Processing men's predictions
INFO [2025-03-28 21:47:53] Processing men data
INFO [2025-03-28 21:47:53] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:47:58] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:47:58] Processing men race 1: 50 C
INFO [2025-03-28 21:47:58] Using World Cup points for this race
INFO [2025-03-28 21:47:58] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:47:58]   Mean: 1
INFO [2025-03-28 21:47:58]   Sum: 75
INFO [2025-03-28 21:47:59] Creating model for top 1 positions
INFO [2025-03-28 21:48:00] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 21:48:00] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:48:01] Creating model for top 3 positions
INFO [2025-03-28 21:48:04] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 21:48:04] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:48:06] Creating model for top 5 positions
INFO [2025-03-28 21:48:07] Brier score for threshold 5 : 0.044
INFO [2025-03-28 21:48:07] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:48:09] Creating model for top 10 positions
INFO [2025-03-28 21:48:11] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 21:48:11] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:48:13] Creating model for top 30 positions
INFO [2025-03-28 21:48:15] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 21:48:15] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:48:17] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:48:17] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:48:17] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:48:17] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:48:17] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:48:17] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:48:17] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:48:17] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:48:17] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:48:17] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:48:17] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:48:17] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:48:17] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:48:17] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:48:17] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:48:17] Calculated percentage for Elo
INFO [2025-03-28 21:48:17] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:48:17] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:48:17] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:48:17] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:48:17] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:48:17] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:48:17]   Mean: 1
INFO [2025-03-28 21:48:17]   Sum: 75
INFO [2025-03-28 21:48:17]   Max: 1
INFO [2025-03-28 21:48:17] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:48:17] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:48:17] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 21:48:17] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:48:17] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:48:17] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 21:48:18] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:48:18] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:48:18] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 21:48:18] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:48:18] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:48:18] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 21:48:18] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:48:18] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:48:18] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 21:48:18] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:48:18] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:48:18]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 21:48:18]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 21:48:18]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 21:48:18]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 21:48:18]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 21:48:18]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 21:48:18]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 21:48:18]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 21:48:18]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 21:48:18]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 21:48:18]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 21:48:18]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 21:48:18]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:48:18]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 21:48:18]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 21:48:18]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:48:18]   Recursive capping needed after redistribution
INFO [2025-03-28 21:48:18]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 21:48:18]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 21:48:18] Position probability sums AFTER normalization:
INFO [2025-03-28 21:48:18]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:48:18]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:48:18]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:48:18]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 21:48:18]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 21:48:18] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:48:18]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:48:18]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:48:18]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:48:18]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:48:18]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:48:18]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:48:18]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 21:48:18]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:48:18]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 21:48:18]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:48:18] Race 1 probability check:
INFO [2025-03-28 21:48:18] Combining race predictions
INFO [2025-03-28 21:48:18] Starting with first race data
INFO [2025-03-28 21:48:18] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:48:18]   Mean: 1
INFO [2025-03-28 21:48:18]   Sum: 75
INFO [2025-03-28 21:48:18] Calculating totals with probability weighting
INFO [2025-03-28 21:48:18] Returning final predictions
INFO [2025-03-28 21:48:18] Final predictions calculated for men
INFO [2025-03-28 21:48:55] Starting race day predictions process
INFO [2025-03-28 21:48:55] Reading races data
INFO [2025-03-28 21:48:55] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:48:55] Found 2 races scheduled for today
INFO [2025-03-28 21:48:55] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:48:55] Reading race startlists
INFO [2025-03-28 21:48:55] Starting race-picks.R execution
INFO [2025-03-28 21:48:55] Running race day predictions workflow
INFO [2025-03-28 21:48:55] Processing men's predictions
INFO [2025-03-28 21:48:55] Processing men data
INFO [2025-03-28 21:48:55] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:49:00] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:49:00] Processing men race 1: 50 C
INFO [2025-03-28 21:49:00] Using World Cup points for this race
INFO [2025-03-28 21:49:00] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:49:00]   Mean: 1
INFO [2025-03-28 21:49:00]   Sum: 75
INFO [2025-03-28 21:49:01] Creating model for top 1 positions
INFO [2025-03-28 21:49:02] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 21:49:02] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:49:04] Creating model for top 3 positions
INFO [2025-03-28 21:49:07] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 21:49:07] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:49:08] Creating model for top 5 positions
INFO [2025-03-28 21:49:10] Brier score for threshold 5 : 0.044
INFO [2025-03-28 21:49:10] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:49:11] Creating model for top 10 positions
INFO [2025-03-28 21:49:14] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 21:49:14] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:49:15] Creating model for top 30 positions
INFO [2025-03-28 21:49:17] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 21:49:17] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:49:20] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:49:20] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:49:20] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:49:20] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:49:20] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:49:20] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:49:20] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:49:20] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:49:20] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:49:20] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:49:20] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:49:20] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:49:20] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:49:20] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:49:20] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:49:20] Calculated percentage for Elo
INFO [2025-03-28 21:49:20] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:49:20] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:49:20] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:49:20] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:49:20] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:49:20] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:49:20]   Mean: 1
INFO [2025-03-28 21:49:20]   Sum: 75
INFO [2025-03-28 21:49:20]   Max: 1
INFO [2025-03-28 21:49:20] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:49:20] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:49:20] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 21:49:20] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:49:20] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:49:20] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 21:49:20] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:49:20] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:49:20] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 21:49:20] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:49:20] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:49:20] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 21:49:20] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:49:20] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:49:20] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 21:49:20] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:49:20] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:49:20]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 21:49:20]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 21:49:20]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 21:49:20]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 21:49:20]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 21:49:20]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 21:49:20]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 21:49:20]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 21:49:20]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 21:49:20]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 21:49:20]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 21:49:20]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 21:49:20]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:49:20]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 21:49:20]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 21:49:20]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:49:20]   Recursive capping needed after redistribution
INFO [2025-03-28 21:49:20]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 21:49:20]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 21:49:20] Position probability sums AFTER normalization:
INFO [2025-03-28 21:49:20]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:49:20]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:49:20]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:49:20]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 21:49:20]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 21:49:20] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:49:20]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:49:20]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:49:20]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:49:20]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:49:20]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:49:20]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:49:20]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 21:49:20]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:49:20]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 21:49:20]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:49:20] Race 1 probability check:
INFO [2025-03-28 21:49:20] Combining race predictions
INFO [2025-03-28 21:49:20] Starting with first race data
INFO [2025-03-28 21:49:20] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:49:20]   Mean: 1
INFO [2025-03-28 21:49:20]   Sum: 75
INFO [2025-03-28 21:49:20] Calculating totals with probability weighting
INFO [2025-03-28 21:49:20] Returning final predictions
INFO [2025-03-28 21:49:20] Final predictions calculated for men
INFO [2025-03-28 21:49:52] Starting race day predictions process
INFO [2025-03-28 21:49:52] Reading races data
INFO [2025-03-28 21:49:52] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:49:52] Found 2 races scheduled for today
INFO [2025-03-28 21:49:52] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:49:52] Reading race startlists
INFO [2025-03-28 21:49:52] Starting race-picks.R execution
INFO [2025-03-28 21:49:52] Running race day predictions workflow
INFO [2025-03-28 21:49:52] Processing men's predictions
INFO [2025-03-28 21:49:52] Processing men data
INFO [2025-03-28 21:49:52] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:49:57] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:49:57] Processing men race 1: 50 C
INFO [2025-03-28 21:49:57] Using World Cup points for this race
INFO [2025-03-28 21:49:57] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:49:57]   Mean: 1
INFO [2025-03-28 21:49:57]   Sum: 75
INFO [2025-03-28 21:49:58] Creating model for top 1 positions
INFO [2025-03-28 21:49:59] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 21:49:59] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:50:01] Creating model for top 3 positions
INFO [2025-03-28 21:50:03] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 21:50:03] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:50:05] Creating model for top 5 positions
INFO [2025-03-28 21:50:06] Brier score for threshold 5 : 0.044
INFO [2025-03-28 21:50:06] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:50:07] Creating model for top 10 positions
INFO [2025-03-28 21:50:10] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 21:50:10] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:50:11] Creating model for top 30 positions
INFO [2025-03-28 21:50:13] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 21:50:13] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:50:16] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:50:16] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:50:16] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:50:16] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:50:16] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:50:16] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:50:16] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:50:16] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:50:16] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:50:16] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:50:16] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:50:16] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:50:16] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:50:16] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:50:16] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:50:16] Calculated percentage for Elo
INFO [2025-03-28 21:50:16] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:50:16] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:50:16] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:50:16] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:50:16] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:50:16] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:50:16]   Mean: 1
INFO [2025-03-28 21:50:16]   Sum: 75
INFO [2025-03-28 21:50:16]   Max: 1
INFO [2025-03-28 21:50:16] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:50:16] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:50:16] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 21:50:16] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:50:16] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:50:16] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 21:50:16] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:50:16] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:50:16] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 21:50:16] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:50:16] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:50:16] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 21:50:16] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:50:16] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:50:16] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 21:50:16] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:50:16] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:50:16]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 21:50:16]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 21:50:16]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 21:50:16]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 21:50:16]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 21:50:16]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 21:50:16]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 21:50:16]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 21:50:16]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 21:50:16]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 21:50:16]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 21:50:16]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 21:50:16]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:50:16]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 21:50:16]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 21:50:16]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:50:16]   Recursive capping needed after redistribution
INFO [2025-03-28 21:50:16]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 21:50:16]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 21:50:16] Position probability sums AFTER normalization:
INFO [2025-03-28 21:50:16]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:50:16]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:50:16]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:50:16]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 21:50:16]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 21:50:16] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:50:16]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:50:16]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:50:16]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:50:16]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:50:16]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:50:16]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:50:16]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 21:50:16]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:50:16]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 21:50:16]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:50:16] Race 1 probability check:
INFO [2025-03-28 21:50:16] Combining race predictions
INFO [2025-03-28 21:50:16] Starting with first race data
INFO [2025-03-28 21:50:16] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:50:16]   Mean: 1
INFO [2025-03-28 21:50:16]   Sum: 75
INFO [2025-03-28 21:50:16] Calculating totals with probability weighting
INFO [2025-03-28 21:50:16] Returning final predictions
INFO [2025-03-28 21:50:16] Final predictions calculated for men
INFO [2025-03-28 21:54:35] Starting race day predictions process
INFO [2025-03-28 21:54:35] Reading races data
INFO [2025-03-28 21:54:35] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:54:35] Found 2 races scheduled for today
INFO [2025-03-28 21:54:35] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:54:35] Reading race startlists
INFO [2025-03-28 21:54:35] Starting race-picks.R execution
INFO [2025-03-28 21:54:35] Running race day predictions workflow
INFO [2025-03-28 21:54:35] Processing men's predictions
INFO [2025-03-28 21:54:35] Processing men data
INFO [2025-03-28 21:54:35] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:54:38] Starting race day predictions process
INFO [2025-03-28 21:54:38] Reading races data
INFO [2025-03-28 21:54:38] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:54:38] Found 2 races scheduled for today
INFO [2025-03-28 21:54:38] Found 1 men's races and 1 ladies races
INFO [2025-03-28 21:54:38] Reading race startlists
INFO [2025-03-28 21:54:38] Starting race-picks.R execution
INFO [2025-03-28 21:54:38] Running race day predictions workflow
INFO [2025-03-28 21:54:38] Processing men's predictions
INFO [2025-03-28 21:54:38] Processing men data
INFO [2025-03-28 21:54:38] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:54:42] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:54:42] Processing men race 1: 50 C
INFO [2025-03-28 21:54:42] Using World Cup points for this race
INFO [2025-03-28 21:54:42] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:54:42]   Mean: 1
INFO [2025-03-28 21:54:42]   Sum: 75
INFO [2025-03-28 21:54:44] Creating model for top 1 positions
INFO [2025-03-28 21:54:45] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 21:54:45] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:54:46] Creating model for top 3 positions
INFO [2025-03-28 21:54:49] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 21:54:49] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:54:50] Creating model for top 5 positions
INFO [2025-03-28 21:54:52] Brier score for threshold 5 : 0.044
INFO [2025-03-28 21:54:52] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:54:53] Creating model for top 10 positions
INFO [2025-03-28 21:54:55] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 21:54:55] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:54:57] Creating model for top 30 positions
INFO [2025-03-28 21:54:59] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 21:54:59] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:55:01] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:55:01] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:55:01] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:55:01] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:55:01] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:55:01] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:55:01] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:55:01] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:55:01] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:55:01] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:55:01] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:55:01] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:55:01] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:55:01] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:55:01] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:55:01] Calculated percentage for Elo
INFO [2025-03-28 21:55:01] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:55:01] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:55:01] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:55:01] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:55:01] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:55:01] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:55:01]   Mean: 1
INFO [2025-03-28 21:55:01]   Sum: 75
INFO [2025-03-28 21:55:01]   Max: 1
INFO [2025-03-28 21:55:01] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:55:01] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:55:01] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 21:55:01] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:55:01] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:55:01] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 21:55:01] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:55:01] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:55:01] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 21:55:01] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:55:01] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 21:55:01] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 21:55:01] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:55:01] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:55:01] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 21:55:01] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:55:01] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:55:01]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 21:55:01]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 21:55:01]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 21:55:01]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 21:55:01]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 21:55:01]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 21:55:01]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 21:55:01]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 21:55:01]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 21:55:01]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 21:55:01]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 21:55:01]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 21:55:01]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:55:01]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 21:55:01]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 21:55:01]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:55:01]   Recursive capping needed after redistribution
INFO [2025-03-28 21:55:01]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 21:55:01]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 21:55:01] Position probability sums AFTER normalization:
INFO [2025-03-28 21:55:01]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:55:01]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:55:01]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:55:01]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 21:55:01]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 21:55:01] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:55:01]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:55:01]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:55:01]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:55:01]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:55:02]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:55:02]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:55:02]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 21:55:02]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:55:02]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 21:55:02]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:55:02] Race 1 probability check:
INFO [2025-03-28 21:55:02] Combining race predictions
INFO [2025-03-28 21:55:02] Starting with first race data
INFO [2025-03-28 21:55:02] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:55:02]   Mean: 1
INFO [2025-03-28 21:55:02]   Sum: 75
INFO [2025-03-28 21:55:02] Calculating totals with probability weighting
INFO [2025-03-28 21:55:02] Returning final predictions
INFO [2025-03-28 21:55:02] Final predictions calculated for men
INFO [2025-03-28 21:55:02] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250329/men_position_probabilities.xlsx
INFO [2025-03-28 21:55:02] Saved men points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/men-points.xlsx
INFO [2025-03-28 21:55:02] Processing ladies predictions
INFO [2025-03-28 21:55:02] Processing ladies data
INFO [2025-03-28 21:55:02] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:55:05] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:55:05] Processing ladies race 1: 50 C
INFO [2025-03-28 21:55:05] Using World Cup points for this race
INFO [2025-03-28 21:55:05] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:55:05]   Mean: 1
INFO [2025-03-28 21:55:05]   Sum: 46
INFO [2025-03-28 21:55:06] Creating model for top 1 positions
INFO [2025-03-28 21:55:08] Brier score for threshold 1 : 0.0122
INFO [2025-03-28 21:55:08] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:55:10] Creating model for top 3 positions
INFO [2025-03-28 21:55:11] Brier score for threshold 3 : 0.0309
INFO [2025-03-28 21:55:11] Variables selected for 3 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:55:12] Creating model for top 5 positions
INFO [2025-03-28 21:55:13] Brier score for threshold 5 : 0.0457
INFO [2025-03-28 21:55:13] Variables selected for 5 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:55:14] Creating model for top 10 positions
INFO [2025-03-28 21:55:15] Brier score for threshold 10 : 0.0709
INFO [2025-03-28 21:55:15] Variables selected for 10 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:55:17] Creating model for top 30 positions
INFO [2025-03-28 21:55:19] Brier score for threshold 30 : 0.1254
INFO [2025-03-28 21:55:19] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:55:21] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:55:21] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:55:21] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:55:21] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:55:21] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:55:21] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:55:21] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:55:21] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:55:21] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:55:21] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:55:21] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:55:21] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:55:21] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:55:21] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:55:21] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:55:21] Calculated percentage for Elo
INFO [2025-03-28 21:55:21] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:55:21] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:55:21] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:55:21] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:55:21] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:55:21] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:55:21]   Mean: 1
INFO [2025-03-28 21:55:21]   Sum: 46
INFO [2025-03-28 21:55:21]   Max: 1
INFO [2025-03-28 21:55:21] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:55:21] Model for threshold 1 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:55:21] Attempting prediction for threshold 1 with 46 rows
INFO [2025-03-28 21:55:21] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:55:21] Model for threshold 3 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:55:21] Attempting prediction for threshold 3 with 46 rows
INFO [2025-03-28 21:55:21] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:55:21] Model for threshold 5 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:55:21] Attempting prediction for threshold 5 with 46 rows
INFO [2025-03-28 21:55:21] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:55:21] Model for threshold 10 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:55:21] Attempting prediction for threshold 10 with 46 rows
INFO [2025-03-28 21:55:21] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:55:21] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:55:21] Attempting prediction for threshold 30 with 46 rows
INFO [2025-03-28 21:55:21] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:55:21] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:55:21]   prob_top1: 57.40% (target: 100%)
INFO [2025-03-28 21:55:21]   prob_top3: 239.30% (target: 300%)
INFO [2025-03-28 21:55:21]   prob_top5: 423.20% (target: 500%)
INFO [2025-03-28 21:55:21]   prob_top10: 859.00% (target: 1000%)
INFO [2025-03-28 21:55:21]   prob_top30: 2534.00% (target: 3000%)
INFO [2025-03-28 21:55:21]   prob_top1 after race prob adjustment: 57.40% (scaling by race participation)
INFO [2025-03-28 21:55:21]   prob_top1 normalization: applied scaling factor of 1.7422
INFO [2025-03-28 21:55:21]   prob_top3 after race prob adjustment: 239.30% (scaling by race participation)
INFO [2025-03-28 21:55:21]   prob_top3 normalization: applied scaling factor of 1.2537
INFO [2025-03-28 21:55:21]   prob_top5 after race prob adjustment: 423.20% (scaling by race participation)
INFO [2025-03-28 21:55:21]   prob_top5 normalization: applied scaling factor of 1.1815
INFO [2025-03-28 21:55:21]   prob_top10 after race prob adjustment: 859.00% (scaling by race participation)
INFO [2025-03-28 21:55:21]   Capping 2 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:55:21]   Recursive capping needed after redistribution
INFO [2025-03-28 21:55:21]   prob_top10 normalization: applied scaling factor of 1.1641
INFO [2025-03-28 21:55:21]   prob_top30 after race prob adjustment: 2534.00% (scaling by race participation)
INFO [2025-03-28 21:55:21]   Capping 15 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:55:21]   Recursive capping needed after redistribution
INFO [2025-03-28 21:55:21]   prob_top30 normalization: applied scaling factor of 1.1839
WARN [2025-03-28 21:55:21]   prob_top30 sum after capping: 2987.20% (target: 3000.00%)
INFO [2025-03-28 21:55:21] Position probability sums AFTER normalization:
INFO [2025-03-28 21:55:21]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:55:21]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:55:21]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:55:21]   prob_top10: 999.34% (target: 1000%)
INFO [2025-03-28 21:55:21]   prob_top30: 2987.20% (target: 3000%)
INFO [2025-03-28 21:55:21] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:55:21]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:55:21]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:55:21]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:55:21]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:55:21]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:55:21]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:55:21]   prob_top10: 999.34% (should be 1000%)
INFO [2025-03-28 21:55:21]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:55:21]   prob_top30: 2987.20% (should be 3000%)
INFO [2025-03-28 21:55:21]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:55:21] Race 1 probability check:
INFO [2025-03-28 21:55:21] Combining race predictions
INFO [2025-03-28 21:55:21] Starting with first race data
INFO [2025-03-28 21:55:22] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:55:22]   Mean: 1
INFO [2025-03-28 21:55:22]   Sum: 46
INFO [2025-03-28 21:55:22] Calculating totals with probability weighting
INFO [2025-03-28 21:55:22] Returning final predictions
INFO [2025-03-28 21:55:22] Final predictions calculated for ladies
INFO [2025-03-28 21:55:22] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250329/ladies_position_probabilities.xlsx
INFO [2025-03-28 21:55:22] Saved ladies points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/ladies-points.xlsx
INFO [2025-03-28 21:55:22] Creating top contenders summary
INFO [2025-03-28 21:55:22] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250329/top_contenders.xlsx
INFO [2025-03-28 21:55:22] Race day prediction workflow complete
INFO [2025-03-28 21:55:22] race-picks.R execution complete
INFO [2025-03-28 21:57:16] Starting race day predictions process
INFO [2025-03-28 21:57:16] Reading races data
INFO [2025-03-28 21:57:16] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:57:16] Found 1 races scheduled for today
INFO [2025-03-28 21:57:16] Found 0 men's races and 1 ladies races
INFO [2025-03-28 21:57:16] Reading race startlists
INFO [2025-03-28 21:57:17] Starting race-picks.R execution
INFO [2025-03-28 21:57:17] Running race day predictions workflow
INFO [2025-03-28 21:57:17] No men's races today
INFO [2025-03-28 21:57:17] Processing ladies predictions
INFO [2025-03-28 21:57:17] Processing ladies data
INFO [2025-03-28 21:57:17] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:57:20] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:57:20] Processing ladies race 1: 50 C
INFO [2025-03-28 21:57:20] Using World Cup points for this race
INFO [2025-03-28 21:57:20] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:57:20]   Mean: 1
INFO [2025-03-28 21:57:20]   Sum: 46
INFO [2025-03-28 21:57:21] Creating model for top 1 positions
INFO [2025-03-28 21:57:37] Starting race day predictions process
INFO [2025-03-28 21:57:37] Reading races data
INFO [2025-03-28 21:57:37] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:57:37] Found 1 races scheduled for today
INFO [2025-03-28 21:57:37] Found 0 men's races and 1 ladies races
INFO [2025-03-28 21:57:37] Reading race startlists
INFO [2025-03-28 21:57:38] Starting race-picks.R execution
INFO [2025-03-28 21:57:38] Running race day predictions workflow
INFO [2025-03-28 21:57:38] No men's races today
INFO [2025-03-28 21:57:38] Processing ladies predictions
INFO [2025-03-28 21:57:38] Processing ladies data
INFO [2025-03-28 21:57:38] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:57:41] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:57:41] Processing ladies race 1: 50 C
INFO [2025-03-28 21:57:41] Using World Cup points for this race
INFO [2025-03-28 21:57:41] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:57:41]   Mean: 1
INFO [2025-03-28 21:57:41]   Sum: 46
INFO [2025-03-28 21:57:43] Creating model for top 1 positions
INFO [2025-03-28 21:57:45] Brier score for threshold 1 : 0.0122
INFO [2025-03-28 21:57:45] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:57:46] Creating model for top 3 positions
INFO [2025-03-28 21:57:47] Brier score for threshold 3 : 0.0309
INFO [2025-03-28 21:57:47] Variables selected for 3 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:57:48] Creating model for top 5 positions
INFO [2025-03-28 21:58:15] Starting race day predictions process
INFO [2025-03-28 21:58:15] Reading races data
INFO [2025-03-28 21:58:15] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:58:15] Found 1 races scheduled for today
INFO [2025-03-28 21:58:15] Found 0 men's races and 1 ladies races
INFO [2025-03-28 21:58:15] Reading race startlists
INFO [2025-03-28 21:58:16] Starting race-picks.R execution
INFO [2025-03-28 21:58:16] Running race day predictions workflow
INFO [2025-03-28 21:58:16] No men's races today
INFO [2025-03-28 21:58:16] Processing ladies predictions
INFO [2025-03-28 21:58:16] Processing ladies data
INFO [2025-03-28 21:58:16] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:58:19] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:58:19] Processing ladies race 1: 50 C
INFO [2025-03-28 21:58:19] Using World Cup points for this race
INFO [2025-03-28 21:58:19] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:58:19]   Mean: 1
INFO [2025-03-28 21:58:19]   Sum: 46
INFO [2025-03-28 21:58:20] Creating model for top 1 positions
INFO [2025-03-28 21:58:22] Brier score for threshold 1 : 0.0122
INFO [2025-03-28 21:58:22] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:58:24] Creating model for top 3 positions
INFO [2025-03-28 21:58:25] Brier score for threshold 3 : 0.0309
INFO [2025-03-28 21:58:25] Variables selected for 3 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:58:26] Creating model for top 5 positions
INFO [2025-03-28 21:58:27] Brier score for threshold 5 : 0.0457
INFO [2025-03-28 21:58:27] Variables selected for 5 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:58:28] Creating model for top 10 positions
INFO [2025-03-28 21:58:29] Brier score for threshold 10 : 0.0709
INFO [2025-03-28 21:58:29] Variables selected for 10 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:58:30] Creating model for top 30 positions
INFO [2025-03-28 21:58:33] Brier score for threshold 30 : 0.1254
INFO [2025-03-28 21:58:33] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:58:35] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:58:35] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:58:35] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:58:35] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:58:35] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:58:35] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:58:35] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:58:35] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:58:35] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:58:35] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:58:35] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:58:35] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:58:35] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:58:35] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:58:35] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:58:35] Calculated percentage for Elo
INFO [2025-03-28 21:58:35] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:58:35] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:58:35] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:58:35] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:58:35] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:58:35] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:58:35]   Mean: 1
INFO [2025-03-28 21:58:35]   Sum: 46
INFO [2025-03-28 21:58:35]   Max: 1
INFO [2025-03-28 21:58:35] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:58:35] Model for threshold 1 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:58:35] Attempting prediction for threshold 1 with 46 rows
INFO [2025-03-28 21:58:35] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:58:35] Model for threshold 3 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:58:35] Attempting prediction for threshold 3 with 46 rows
INFO [2025-03-28 21:58:35] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:58:35] Model for threshold 5 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:58:35] Attempting prediction for threshold 5 with 46 rows
INFO [2025-03-28 21:58:35] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:58:35] Model for threshold 10 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:58:35] Attempting prediction for threshold 10 with 46 rows
INFO [2025-03-28 21:58:35] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:58:35] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:58:35] Attempting prediction for threshold 30 with 46 rows
INFO [2025-03-28 21:58:35] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:58:35] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:58:35]   prob_top1: 57.40% (target: 100%)
INFO [2025-03-28 21:58:35]   prob_top3: 239.30% (target: 300%)
INFO [2025-03-28 21:58:35]   prob_top5: 423.20% (target: 500%)
INFO [2025-03-28 21:58:35]   prob_top10: 859.00% (target: 1000%)
INFO [2025-03-28 21:58:35]   prob_top30: 2534.00% (target: 3000%)
INFO [2025-03-28 21:58:35]   prob_top1 after race prob adjustment: 57.40% (scaling by race participation)
INFO [2025-03-28 21:58:35]   prob_top1 normalization: applied scaling factor of 1.7422
INFO [2025-03-28 21:58:35]   prob_top3 after race prob adjustment: 239.30% (scaling by race participation)
INFO [2025-03-28 21:58:35]   prob_top3 normalization: applied scaling factor of 1.2537
INFO [2025-03-28 21:58:35]   prob_top5 after race prob adjustment: 423.20% (scaling by race participation)
INFO [2025-03-28 21:58:35]   prob_top5 normalization: applied scaling factor of 1.1815
INFO [2025-03-28 21:58:35]   prob_top10 after race prob adjustment: 859.00% (scaling by race participation)
INFO [2025-03-28 21:58:35]   Capping 2 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:58:35]   Recursive capping needed after redistribution
INFO [2025-03-28 21:58:35]   prob_top10 normalization: applied scaling factor of 1.1641
INFO [2025-03-28 21:58:35]   prob_top30 after race prob adjustment: 2534.00% (scaling by race participation)
INFO [2025-03-28 21:58:35]   Capping 15 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:58:35]   Recursive capping needed after redistribution
INFO [2025-03-28 21:58:35]   prob_top30 normalization: applied scaling factor of 1.1839
WARN [2025-03-28 21:58:35]   prob_top30 sum after capping: 2987.20% (target: 3000.00%)
INFO [2025-03-28 21:58:35] Position probability sums AFTER normalization:
INFO [2025-03-28 21:58:35]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:58:35]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:58:35]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:58:35]   prob_top10: 999.34% (target: 1000%)
INFO [2025-03-28 21:58:35]   prob_top30: 2987.20% (target: 3000%)
INFO [2025-03-28 21:58:35] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:58:35]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:58:35]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:58:35]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:58:35]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:58:35]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:58:35]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:58:35]   prob_top10: 999.34% (should be 1000%)
INFO [2025-03-28 21:58:35]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:58:35]   prob_top30: 2987.20% (should be 3000%)
INFO [2025-03-28 21:58:35]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:58:49] Race 1 probability check:
INFO [2025-03-28 21:58:49] Combining race predictions
INFO [2025-03-28 21:58:50] Starting with first race data
INFO [2025-03-28 21:58:50] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:58:50]   Mean: 1
INFO [2025-03-28 21:58:50]   Sum: 46
INFO [2025-03-28 21:58:50] Calculating totals with probability weighting
INFO [2025-03-28 21:58:50] Returning final predictions
INFO [2025-03-28 21:58:50] Final predictions calculated for ladies
INFO [2025-03-28 21:58:50] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250329/ladies_position_probabilities.xlsx
INFO [2025-03-28 21:58:50] Saved ladies points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/ladies-points.xlsx
INFO [2025-03-28 21:58:50] Creating top contenders summary
INFO [2025-03-28 21:58:50] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250329/top_contenders.xlsx
INFO [2025-03-28 21:58:50] Race day prediction workflow complete
INFO [2025-03-28 21:58:50] race-picks.R execution complete
INFO [2025-03-28 21:59:17] Starting race day predictions process
INFO [2025-03-28 21:59:17] Reading races data
INFO [2025-03-28 21:59:17] Current date (UTC): 2025-03-29
INFO [2025-03-28 21:59:17] Found 1 races scheduled for today
INFO [2025-03-28 21:59:17] Found 0 men's races and 1 ladies races
INFO [2025-03-28 21:59:17] Reading race startlists
INFO [2025-03-28 21:59:17] Starting race-picks.R execution
INFO [2025-03-28 21:59:17] Running race day predictions workflow
INFO [2025-03-28 21:59:17] No men's races today
INFO [2025-03-28 21:59:17] Processing ladies predictions
INFO [2025-03-28 21:59:18] Processing ladies data
INFO [2025-03-28 21:59:18] Using WORLD CUP points system for today's race
INFO [2025-03-28 21:59:21] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 21:59:21] Processing ladies race 1: 50 C
INFO [2025-03-28 21:59:21] Using World Cup points for this race
INFO [2025-03-28 21:59:21] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 21:59:21]   Mean: 1
INFO [2025-03-28 21:59:21]   Sum: 46
INFO [2025-03-28 21:59:22] Creating model for top 1 positions
INFO [2025-03-28 21:59:25] Brier score for threshold 1 : 0.0122
INFO [2025-03-28 21:59:25] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:59:26] Creating model for top 3 positions
INFO [2025-03-28 21:59:27] Brier score for threshold 3 : 0.0309
INFO [2025-03-28 21:59:27] Variables selected for 3 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:59:28] Creating model for top 5 positions
INFO [2025-03-28 21:59:29] Brier score for threshold 5 : 0.0457
INFO [2025-03-28 21:59:29] Variables selected for 5 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:59:30] Creating model for top 10 positions
INFO [2025-03-28 21:59:32] Brier score for threshold 10 : 0.0709
INFO [2025-03-28 21:59:32] Variables selected for 10 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:59:33] Creating model for top 30 positions
INFO [2025-03-28 21:59:36] Brier score for threshold 30 : 0.1254
INFO [2025-03-28 21:59:36] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:59:38] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 21:59:38] Race probability columns found: Race1_Prob
INFO [2025-03-28 21:59:38] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 21:59:38] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 21:59:38] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 21:59:38] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 21:59:38] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 21:59:38] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 21:59:38] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 21:59:38] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 21:59:38] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 21:59:38] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 21:59:38] Calculated percentage for Distance_Elo
INFO [2025-03-28 21:59:38] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 21:59:38] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 21:59:38] Calculated percentage for Elo
INFO [2025-03-28 21:59:38] Calculated percentage for Sprint_Elo
INFO [2025-03-28 21:59:38] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 21:59:38] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 21:59:38] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 21:59:38] Calculated percentage for Classic_Elo
INFO [2025-03-28 21:59:38] Race probability column Race1_Prob summary:
INFO [2025-03-28 21:59:38]   Mean: 1
INFO [2025-03-28 21:59:38]   Sum: 46
INFO [2025-03-28 21:59:38]   Max: 1
INFO [2025-03-28 21:59:38] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 21:59:38] Model for threshold 1 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:59:38] Attempting prediction for threshold 1 with 46 rows
INFO [2025-03-28 21:59:38] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 21:59:38] Model for threshold 3 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:59:38] Attempting prediction for threshold 3 with 46 rows
INFO [2025-03-28 21:59:38] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 21:59:38] Model for threshold 5 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:59:38] Attempting prediction for threshold 5 with 46 rows
INFO [2025-03-28 21:59:38] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 21:59:38] Model for threshold 10 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 21:59:38] Attempting prediction for threshold 10 with 46 rows
INFO [2025-03-28 21:59:38] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 21:59:38] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 21:59:38] Attempting prediction for threshold 30 with 46 rows
INFO [2025-03-28 21:59:38] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 21:59:38] Position probability sums BEFORE normalization:
INFO [2025-03-28 21:59:38]   prob_top1: 57.40% (target: 100%)
INFO [2025-03-28 21:59:38]   prob_top3: 239.30% (target: 300%)
INFO [2025-03-28 21:59:38]   prob_top5: 423.20% (target: 500%)
INFO [2025-03-28 21:59:38]   prob_top10: 859.00% (target: 1000%)
INFO [2025-03-28 21:59:38]   prob_top30: 2534.00% (target: 3000%)
INFO [2025-03-28 21:59:38]   prob_top1 after race prob adjustment: 57.40% (scaling by race participation)
INFO [2025-03-28 21:59:38]   prob_top1 normalization: applied scaling factor of 1.7422
INFO [2025-03-28 21:59:38]   prob_top3 after race prob adjustment: 239.30% (scaling by race participation)
INFO [2025-03-28 21:59:38]   prob_top3 normalization: applied scaling factor of 1.2537
INFO [2025-03-28 21:59:38]   prob_top5 after race prob adjustment: 423.20% (scaling by race participation)
INFO [2025-03-28 21:59:38]   prob_top5 normalization: applied scaling factor of 1.1815
INFO [2025-03-28 21:59:38]   prob_top10 after race prob adjustment: 859.00% (scaling by race participation)
INFO [2025-03-28 21:59:38]   Capping 2 skiers with >100% probability for prob_top10
INFO [2025-03-28 21:59:38]   Recursive capping needed after redistribution
INFO [2025-03-28 21:59:38]   prob_top10 normalization: applied scaling factor of 1.1641
INFO [2025-03-28 21:59:38]   prob_top30 after race prob adjustment: 2534.00% (scaling by race participation)
INFO [2025-03-28 21:59:38]   Capping 15 skiers with >100% probability for prob_top30
INFO [2025-03-28 21:59:38]   Recursive capping needed after redistribution
INFO [2025-03-28 21:59:38]   prob_top30 normalization: applied scaling factor of 1.1839
WARN [2025-03-28 21:59:38]   prob_top30 sum after capping: 2987.20% (target: 3000.00%)
INFO [2025-03-28 21:59:38] Position probability sums AFTER normalization:
INFO [2025-03-28 21:59:38]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 21:59:38]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 21:59:38]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 21:59:38]   prob_top10: 999.34% (target: 1000%)
INFO [2025-03-28 21:59:38]   prob_top30: 2987.20% (target: 3000%)
INFO [2025-03-28 21:59:38] Race 1 position probability sums after normalization:
INFO [2025-03-28 21:59:38]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 21:59:38]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:59:38]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 21:59:38]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:59:38]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 21:59:38]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:59:38]   prob_top10: 999.34% (should be 1000%)
INFO [2025-03-28 21:59:38]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:59:38]   prob_top30: 2987.20% (should be 3000%)
INFO [2025-03-28 21:59:38]   Top 3 skiers for this threshold:
INFO [2025-03-28 21:59:38] Race 1 probability check:
INFO [2025-03-28 21:59:38] Combining race predictions
INFO [2025-03-28 21:59:38] Starting with first race data
INFO [2025-03-28 21:59:38] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 21:59:38]   Mean: 1
INFO [2025-03-28 21:59:38]   Sum: 46
INFO [2025-03-28 21:59:38] Calculating totals with probability weighting
INFO [2025-03-28 21:59:38] Returning final predictions
INFO [2025-03-28 21:59:38] Final predictions calculated for ladies
INFO [2025-03-28 21:59:38] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250329/ladies_position_probabilities.xlsx
INFO [2025-03-28 21:59:38] Saved ladies points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/ladies-points.xlsx
INFO [2025-03-28 21:59:38] Creating top contenders summary
INFO [2025-03-28 21:59:38] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250329/top_contenders.xlsx
INFO [2025-03-28 21:59:38] Race day prediction workflow complete
INFO [2025-03-28 21:59:38] race-picks.R execution complete
INFO [2025-03-28 22:02:27] Starting race day predictions process
INFO [2025-03-28 22:02:27] Reading races data
INFO [2025-03-28 22:02:27] Current date (UTC): 2025-03-29
INFO [2025-03-28 22:02:27] Found 1 races scheduled for today
INFO [2025-03-28 22:02:27] Found 0 men's races and 1 ladies races
INFO [2025-03-28 22:02:27] Reading race startlists
INFO [2025-03-28 22:02:28] Starting race-picks.R execution
INFO [2025-03-28 22:02:28] Running race day predictions workflow
INFO [2025-03-28 22:02:28] No men's races today
INFO [2025-03-28 22:02:28] Processing ladies predictions
INFO [2025-03-28 22:02:28] Processing ladies data
INFO [2025-03-28 22:02:28] Using WORLD CUP points system for today's race
INFO [2025-03-28 22:02:32] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 22:02:32] Processing ladies race 1: 50 C
INFO [2025-03-28 22:02:32] Using World Cup points for this race
INFO [2025-03-28 22:02:32] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 22:02:32]   Mean: 1
INFO [2025-03-28 22:02:32]   Sum: 46
INFO [2025-03-28 22:02:33] Creating model for top 1 positions
INFO [2025-03-28 22:02:35] Brier score for threshold 1 : 0.0122
INFO [2025-03-28 22:02:35] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:02:36] Creating model for top 3 positions
INFO [2025-03-28 22:02:37] Brier score for threshold 3 : 0.0309
INFO [2025-03-28 22:02:37] Variables selected for 3 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:02:38] Creating model for top 5 positions
INFO [2025-03-28 22:02:39] Brier score for threshold 5 : 0.0457
INFO [2025-03-28 22:02:39] Variables selected for 5 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:02:40] Creating model for top 10 positions
INFO [2025-03-28 22:02:42] Brier score for threshold 10 : 0.0709
INFO [2025-03-28 22:02:42] Variables selected for 10 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:02:43] Creating model for top 30 positions
INFO [2025-03-28 22:02:46] Brier score for threshold 30 : 0.1254
INFO [2025-03-28 22:02:46] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 22:02:47] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 22:02:47] Race probability columns found: Race1_Prob
INFO [2025-03-28 22:02:47] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 22:02:47] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 22:02:47] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 22:02:47] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 22:02:47] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 22:02:47] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 22:02:47] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 22:02:47] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 22:02:47] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 22:02:47] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 22:02:47] Calculated percentage for Distance_Elo
INFO [2025-03-28 22:02:47] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 22:02:47] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 22:02:47] Calculated percentage for Elo
INFO [2025-03-28 22:02:47] Calculated percentage for Sprint_Elo
INFO [2025-03-28 22:02:47] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 22:02:47] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 22:02:47] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 22:02:47] Calculated percentage for Classic_Elo
INFO [2025-03-28 22:02:47] Race probability column Race1_Prob summary:
INFO [2025-03-28 22:02:47]   Mean: 1
INFO [2025-03-28 22:02:47]   Sum: 46
INFO [2025-03-28 22:02:47]   Max: 1
INFO [2025-03-28 22:02:47] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 22:02:47] Model for threshold 1 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:02:47] Attempting prediction for threshold 1 with 46 rows
INFO [2025-03-28 22:02:48] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 22:02:48] Model for threshold 3 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:02:48] Attempting prediction for threshold 3 with 46 rows
INFO [2025-03-28 22:02:48] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 22:02:48] Model for threshold 5 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:02:48] Attempting prediction for threshold 5 with 46 rows
INFO [2025-03-28 22:02:48] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 22:02:48] Model for threshold 10 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:02:48] Attempting prediction for threshold 10 with 46 rows
INFO [2025-03-28 22:02:48] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 22:02:48] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 22:02:48] Attempting prediction for threshold 30 with 46 rows
INFO [2025-03-28 22:02:48] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 22:02:48] Position probability sums BEFORE normalization:
INFO [2025-03-28 22:02:48]   prob_top1: 57.40% (target: 100%)
INFO [2025-03-28 22:02:48]   prob_top3: 239.30% (target: 300%)
INFO [2025-03-28 22:02:48]   prob_top5: 423.20% (target: 500%)
INFO [2025-03-28 22:02:48]   prob_top10: 859.00% (target: 1000%)
INFO [2025-03-28 22:02:48]   prob_top30: 2534.00% (target: 3000%)
INFO [2025-03-28 22:02:48]   prob_top1 after race prob adjustment: 57.40% (scaling by race participation)
INFO [2025-03-28 22:02:48]   prob_top1 normalization: applied scaling factor of 1.7422
INFO [2025-03-28 22:02:48]   prob_top3 after race prob adjustment: 239.30% (scaling by race participation)
INFO [2025-03-28 22:02:48]   prob_top3 normalization: applied scaling factor of 1.2537
INFO [2025-03-28 22:02:48]   prob_top5 after race prob adjustment: 423.20% (scaling by race participation)
INFO [2025-03-28 22:02:48]   prob_top5 normalization: applied scaling factor of 1.1815
INFO [2025-03-28 22:02:48]   prob_top10 after race prob adjustment: 859.00% (scaling by race participation)
INFO [2025-03-28 22:02:48]   Capping 2 skiers with >100% probability for prob_top10
INFO [2025-03-28 22:02:48]   Recursive capping needed after redistribution
INFO [2025-03-28 22:02:48]   prob_top10 normalization: applied scaling factor of 1.1641
INFO [2025-03-28 22:02:48]   prob_top30 after race prob adjustment: 2534.00% (scaling by race participation)
INFO [2025-03-28 22:02:48]   Capping 15 skiers with >100% probability for prob_top30
INFO [2025-03-28 22:02:48]   Recursive capping needed after redistribution
INFO [2025-03-28 22:02:48]   prob_top30 normalization: applied scaling factor of 1.1839
WARN [2025-03-28 22:02:48]   prob_top30 sum after capping: 2987.20% (target: 3000.00%)
INFO [2025-03-28 22:02:48] Position probability sums AFTER normalization:
INFO [2025-03-28 22:02:48]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 22:02:48]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 22:02:48]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 22:02:48]   prob_top10: 999.34% (target: 1000%)
INFO [2025-03-28 22:02:48]   prob_top30: 2987.20% (target: 3000%)
INFO [2025-03-28 22:02:48] Race 1 position probability sums after normalization:
INFO [2025-03-28 22:02:48]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 22:02:48]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:02:48]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 22:02:48]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:02:48]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 22:02:48]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:02:48]   prob_top10: 999.34% (should be 1000%)
INFO [2025-03-28 22:02:48]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:02:48]   prob_top30: 2987.20% (should be 3000%)
INFO [2025-03-28 22:02:48]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:02:50] Race 1 probability check:
INFO [2025-03-28 22:02:50] Combining race predictions
INFO [2025-03-28 22:02:50] Starting with first race data
INFO [2025-03-28 22:02:50] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 22:02:50]   Mean: 1
INFO [2025-03-28 22:02:50]   Sum: 46
INFO [2025-03-28 22:02:50] Calculating totals with probability weighting
INFO [2025-03-28 22:02:50] Returning final predictions
INFO [2025-03-28 22:02:50] Final predictions calculated for ladies
INFO [2025-03-28 22:02:52] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/ladies_position_probabilities.xlsx
INFO [2025-03-28 22:02:52] Saved ladies points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/ladies-points.xlsx
INFO [2025-03-28 22:02:52] Creating top contenders summary
INFO [2025-03-28 22:02:52] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250329/top_contenders.xlsx
INFO [2025-03-28 22:02:52] Race day prediction workflow complete
INFO [2025-03-28 22:02:52] race-picks.R execution complete
INFO [2025-03-28 22:04:26] Starting race day predictions process
INFO [2025-03-28 22:04:26] Reading races data
INFO [2025-03-28 22:04:26] Current date (UTC): 2025-03-29
INFO [2025-03-28 22:04:26] Found 1 races scheduled for today
INFO [2025-03-28 22:04:26] Found 0 men's races and 1 ladies races
INFO [2025-03-28 22:04:26] Reading race startlists
INFO [2025-03-28 22:04:26] Starting race-picks.R execution
INFO [2025-03-28 22:04:26] Running race day predictions workflow
INFO [2025-03-28 22:04:26] No men's races today
INFO [2025-03-28 22:04:26] Processing ladies predictions
INFO [2025-03-28 22:04:26] Processing ladies data
INFO [2025-03-28 22:04:26] Using WORLD CUP points system for today's race
INFO [2025-03-28 22:04:30] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 22:04:30] Processing ladies race 1: 50 C
INFO [2025-03-28 22:04:30] Using World Cup points for this race
INFO [2025-03-28 22:04:30] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 22:04:30]   Mean: 1
INFO [2025-03-28 22:04:30]   Sum: 46
INFO [2025-03-28 22:04:31] Creating model for top 1 positions
INFO [2025-03-28 22:04:33] Brier score for threshold 1 : 0.0122
INFO [2025-03-28 22:04:33] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:04:34] Creating model for top 3 positions
INFO [2025-03-28 22:04:35] Brier score for threshold 3 : 0.0309
INFO [2025-03-28 22:04:35] Variables selected for 3 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:04:36] Creating model for top 5 positions
INFO [2025-03-28 22:04:38] Brier score for threshold 5 : 0.0457
INFO [2025-03-28 22:04:38] Variables selected for 5 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:04:39] Creating model for top 10 positions
INFO [2025-03-28 22:04:40] Brier score for threshold 10 : 0.0709
INFO [2025-03-28 22:04:40] Variables selected for 10 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:04:41] Creating model for top 30 positions
INFO [2025-03-28 22:04:44] Brier score for threshold 30 : 0.1254
INFO [2025-03-28 22:04:44] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 22:04:46] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 22:04:46] Race probability columns found: Race1_Prob
INFO [2025-03-28 22:04:46] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 22:04:46] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 22:04:46] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 22:04:46] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 22:04:46] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 22:04:46] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 22:04:46] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 22:04:46] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 22:04:46] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 22:04:46] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 22:04:46] Calculated percentage for Distance_Elo
INFO [2025-03-28 22:04:46] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 22:04:46] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 22:04:46] Calculated percentage for Elo
INFO [2025-03-28 22:04:46] Calculated percentage for Sprint_Elo
INFO [2025-03-28 22:04:46] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 22:04:46] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 22:04:46] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 22:04:46] Calculated percentage for Classic_Elo
INFO [2025-03-28 22:04:46] Race probability column Race1_Prob summary:
INFO [2025-03-28 22:04:46]   Mean: 1
INFO [2025-03-28 22:04:46]   Sum: 46
INFO [2025-03-28 22:04:46]   Max: 1
INFO [2025-03-28 22:04:46] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 22:04:46] Model for threshold 1 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:04:46] Attempting prediction for threshold 1 with 46 rows
INFO [2025-03-28 22:04:46] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 22:04:46] Model for threshold 3 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:04:46] Attempting prediction for threshold 3 with 46 rows
INFO [2025-03-28 22:04:46] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 22:04:46] Model for threshold 5 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:04:46] Attempting prediction for threshold 5 with 46 rows
INFO [2025-03-28 22:04:46] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 22:04:46] Model for threshold 10 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-28 22:04:46] Attempting prediction for threshold 10 with 46 rows
INFO [2025-03-28 22:04:46] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 22:04:46] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 22:04:46] Attempting prediction for threshold 30 with 46 rows
INFO [2025-03-28 22:04:46] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 22:04:46] Position probability sums BEFORE normalization:
INFO [2025-03-28 22:04:46]   prob_top1: 57.40% (target: 100%)
INFO [2025-03-28 22:04:46]   prob_top3: 239.30% (target: 300%)
INFO [2025-03-28 22:04:46]   prob_top5: 423.20% (target: 500%)
INFO [2025-03-28 22:04:46]   prob_top10: 859.00% (target: 1000%)
INFO [2025-03-28 22:04:46]   prob_top30: 2534.00% (target: 3000%)
INFO [2025-03-28 22:04:46]   prob_top1 after race prob adjustment: 57.40% (scaling by race participation)
INFO [2025-03-28 22:04:46]   prob_top1 normalization: applied scaling factor of 1.7422
INFO [2025-03-28 22:04:46]   prob_top3 after race prob adjustment: 239.30% (scaling by race participation)
INFO [2025-03-28 22:04:46]   prob_top3 normalization: applied scaling factor of 1.2537
INFO [2025-03-28 22:04:46]   prob_top5 after race prob adjustment: 423.20% (scaling by race participation)
INFO [2025-03-28 22:04:46]   prob_top5 normalization: applied scaling factor of 1.1815
INFO [2025-03-28 22:04:46]   prob_top10 after race prob adjustment: 859.00% (scaling by race participation)
INFO [2025-03-28 22:04:46]   Capping 2 skiers with >100% probability for prob_top10
INFO [2025-03-28 22:04:46]   Recursive capping needed after redistribution
INFO [2025-03-28 22:04:46]   prob_top10 normalization: applied scaling factor of 1.1641
INFO [2025-03-28 22:04:46]   prob_top30 after race prob adjustment: 2534.00% (scaling by race participation)
INFO [2025-03-28 22:04:46]   Capping 15 skiers with >100% probability for prob_top30
INFO [2025-03-28 22:04:46]   Recursive capping needed after redistribution
INFO [2025-03-28 22:04:46]   prob_top30 normalization: applied scaling factor of 1.1839
WARN [2025-03-28 22:04:46]   prob_top30 sum after capping: 2987.20% (target: 3000.00%)
INFO [2025-03-28 22:04:46] Position probability sums AFTER normalization:
INFO [2025-03-28 22:04:46]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 22:04:46]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 22:04:46]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 22:04:46]   prob_top10: 999.34% (target: 1000%)
INFO [2025-03-28 22:04:46]   prob_top30: 2987.20% (target: 3000%)
INFO [2025-03-28 22:04:46] Race 1 position probability sums after normalization:
INFO [2025-03-28 22:04:46]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 22:04:46]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:04:46]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 22:04:46]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:04:46]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 22:04:46]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:04:46]   prob_top10: 999.34% (should be 1000%)
INFO [2025-03-28 22:04:46]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:04:46]   prob_top30: 2987.20% (should be 3000%)
INFO [2025-03-28 22:04:46]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:04:46] Race 1 probability check:
INFO [2025-03-28 22:04:46] Combining race predictions
INFO [2025-03-28 22:04:46] Starting with first race data
INFO [2025-03-28 22:04:47] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 22:04:47]   Mean: 1
INFO [2025-03-28 22:04:47]   Sum: 46
INFO [2025-03-28 22:04:47] Calculating totals with probability weighting
INFO [2025-03-28 22:04:47] Returning final predictions
INFO [2025-03-28 22:04:47] Final predictions calculated for ladies
INFO [2025-03-28 22:04:47] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/ladies_position_probabilities.xlsx
INFO [2025-03-28 22:04:47] Saved ladies points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/ladies-points.xlsx
INFO [2025-03-28 22:04:47] Creating top contenders summary
INFO [2025-03-28 22:04:47] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250329/top_contenders.xlsx
INFO [2025-03-28 22:04:47] Race day prediction workflow complete
INFO [2025-03-28 22:04:47] race-picks.R execution complete
INFO [2025-03-28 22:06:55] Starting race day predictions process
INFO [2025-03-28 22:06:55] Reading races data
INFO [2025-03-28 22:06:55] Current date (UTC): 2025-03-29
INFO [2025-03-28 22:06:55] Found 1 races scheduled for today
INFO [2025-03-28 22:06:55] Found 1 men's races and 0 ladies races
INFO [2025-03-28 22:06:55] Reading race startlists
INFO [2025-03-28 22:06:55] Starting race-picks.R execution
INFO [2025-03-28 22:06:55] Running race day predictions workflow
INFO [2025-03-28 22:06:55] Processing men's predictions
INFO [2025-03-28 22:06:56] Processing men data
INFO [2025-03-28 22:06:56] Using WORLD CUP points system for today's race
INFO [2025-03-28 22:07:00] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 22:07:00] Processing men race 1: 50 C
INFO [2025-03-28 22:07:00] Using World Cup points for this race
INFO [2025-03-28 22:07:00] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 22:07:00]   Mean: 1
INFO [2025-03-28 22:07:00]   Sum: 75
INFO [2025-03-28 22:07:01] Creating model for top 1 positions
INFO [2025-03-28 22:07:03] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 22:07:03] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 22:07:04] Creating model for top 3 positions
INFO [2025-03-28 22:07:06] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 22:07:06] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 22:07:08] Creating model for top 5 positions
INFO [2025-03-28 22:07:09] Brier score for threshold 5 : 0.044
INFO [2025-03-28 22:07:09] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 22:07:10] Creating model for top 10 positions
INFO [2025-03-28 22:07:13] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 22:07:13] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 22:07:14] Creating model for top 30 positions
INFO [2025-03-28 22:07:16] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 22:07:16] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 22:07:19] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 22:07:19] Race probability columns found: Race1_Prob
INFO [2025-03-28 22:07:19] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 22:07:19] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 22:07:19] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 22:07:19] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 22:07:19] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 22:07:19] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 22:07:19] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 22:07:19] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 22:07:19] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 22:07:19] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 22:07:19] Calculated percentage for Distance_Elo
INFO [2025-03-28 22:07:19] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 22:07:19] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 22:07:19] Calculated percentage for Elo
INFO [2025-03-28 22:07:19] Calculated percentage for Sprint_Elo
INFO [2025-03-28 22:07:19] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 22:07:19] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 22:07:19] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 22:07:19] Calculated percentage for Classic_Elo
INFO [2025-03-28 22:07:19] Race probability column Race1_Prob summary:
INFO [2025-03-28 22:07:19]   Mean: 1
INFO [2025-03-28 22:07:19]   Sum: 75
INFO [2025-03-28 22:07:19]   Max: 1
INFO [2025-03-28 22:07:19] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 22:07:19] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 22:07:19] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 22:07:19] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 22:07:19] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 22:07:19] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 22:07:19] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 22:07:19] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 22:07:19] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 22:07:19] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 22:07:19] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 22:07:19] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 22:07:19] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 22:07:19] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 22:07:19] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 22:07:19] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 22:07:19] Position probability sums BEFORE normalization:
INFO [2025-03-28 22:07:19]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 22:07:19]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 22:07:19]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 22:07:19]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 22:07:19]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 22:07:19]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 22:07:19]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 22:07:19]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 22:07:19]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 22:07:19]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 22:07:19]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 22:07:19]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 22:07:19]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 22:07:19]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 22:07:19]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 22:07:19]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 22:07:19]   Recursive capping needed after redistribution
INFO [2025-03-28 22:07:19]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 22:07:19]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 22:07:19] Position probability sums AFTER normalization:
INFO [2025-03-28 22:07:19]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 22:07:19]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 22:07:19]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 22:07:19]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 22:07:19]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 22:07:19] Race 1 position probability sums after normalization:
INFO [2025-03-28 22:07:19]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 22:07:19]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:07:19]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 22:07:19]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:07:19]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 22:07:19]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:07:19]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 22:07:19]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:07:19]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 22:07:19]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:07:19] Race 1 probability check:
INFO [2025-03-28 22:07:19] Combining race predictions
INFO [2025-03-28 22:07:19] Starting with first race data
INFO [2025-03-28 22:07:19] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 22:07:19]   Mean: 1
INFO [2025-03-28 22:07:19]   Sum: 75
INFO [2025-03-28 22:07:19] Calculating totals with probability weighting
INFO [2025-03-28 22:07:19] Returning final predictions
INFO [2025-03-28 22:07:19] Final predictions calculated for men
INFO [2025-03-28 22:07:22] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/men_position_probabilities.xlsx
INFO [2025-03-28 22:07:22] Saved men points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/men-points.xlsx
INFO [2025-03-28 22:07:22] No ladies races today
INFO [2025-03-28 22:07:22] Creating top contenders summary
INFO [2025-03-28 22:07:22] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250329/top_contenders.xlsx
INFO [2025-03-28 22:07:22] Race day prediction workflow complete
INFO [2025-03-28 22:07:22] race-picks.R execution complete
INFO [2025-03-28 22:07:26] Starting race day predictions process
INFO [2025-03-28 22:07:26] Reading races data
INFO [2025-03-28 22:07:26] Current date (UTC): 2025-03-29
INFO [2025-03-28 22:07:26] Found 1 races scheduled for today
INFO [2025-03-28 22:07:26] Found 1 men's races and 0 ladies races
INFO [2025-03-28 22:07:26] Reading race startlists
INFO [2025-03-28 22:07:26] Starting race-picks.R execution
INFO [2025-03-28 22:07:26] Running race day predictions workflow
INFO [2025-03-28 22:07:26] Processing men's predictions
INFO [2025-03-28 22:07:26] Processing men data
INFO [2025-03-28 22:07:26] Using WORLD CUP points system for today's race
INFO [2025-03-28 22:07:30] Race probability columns in startlist: Race1_Prob
INFO [2025-03-28 22:07:30] Processing men race 1: 50 C
INFO [2025-03-28 22:07:30] Using World Cup points for this race
INFO [2025-03-28 22:07:30] Race probability column Race1_Prob exists in startlist
INFO [2025-03-28 22:07:30]   Mean: 1
INFO [2025-03-28 22:07:30]   Sum: 75
INFO [2025-03-28 22:07:32] Creating model for top 1 positions
INFO [2025-03-28 22:07:33] Brier score for threshold 1 : 0.0112
INFO [2025-03-28 22:07:33] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 22:07:34] Creating model for top 3 positions
INFO [2025-03-28 22:07:37] Brier score for threshold 3 : 0.0291
INFO [2025-03-28 22:07:37] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 22:07:38] Creating model for top 5 positions
INFO [2025-03-28 22:07:40] Brier score for threshold 5 : 0.044
INFO [2025-03-28 22:07:40] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 22:07:41] Creating model for top 10 positions
INFO [2025-03-28 22:07:44] Brier score for threshold 10 : 0.0721
INFO [2025-03-28 22:07:44] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 22:07:45] Creating model for top 30 positions
INFO [2025-03-28 22:07:47] Brier score for threshold 30 : 0.1324
INFO [2025-03-28 22:07:47] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 22:07:50] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-28 22:07:50] Race probability columns found: Race1_Prob
INFO [2025-03-28 22:07:50] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-28 22:07:50] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-28 22:07:50] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-28 22:07:50] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-28 22:07:50] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-28 22:07:50] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-28 22:07:50] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-28 22:07:50] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-28 22:07:50] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-28 22:07:50] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-28 22:07:50] Calculated percentage for Distance_Elo
INFO [2025-03-28 22:07:50] Calculated percentage for Distance_C_Elo
INFO [2025-03-28 22:07:50] Calculated percentage for Distance_F_Elo
INFO [2025-03-28 22:07:50] Calculated percentage for Elo
INFO [2025-03-28 22:07:50] Calculated percentage for Sprint_Elo
INFO [2025-03-28 22:07:50] Calculated percentage for Sprint_C_Elo
INFO [2025-03-28 22:07:50] Calculated percentage for Sprint_F_Elo
INFO [2025-03-28 22:07:50] Calculated percentage for Freestyle_Elo
INFO [2025-03-28 22:07:50] Calculated percentage for Classic_Elo
INFO [2025-03-28 22:07:50] Race probability column Race1_Prob summary:
INFO [2025-03-28 22:07:50]   Mean: 1
INFO [2025-03-28 22:07:50]   Sum: 75
INFO [2025-03-28 22:07:50]   Max: 1
INFO [2025-03-28 22:07:50] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-28 22:07:50] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 22:07:50] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-28 22:07:50] Made predictions with adjustments for position threshold 1
INFO [2025-03-28 22:07:50] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 22:07:50] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-28 22:07:50] Made predictions with adjustments for position threshold 3
INFO [2025-03-28 22:07:50] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 22:07:50] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-28 22:07:50] Made predictions with adjustments for position threshold 5
INFO [2025-03-28 22:07:50] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-28 22:07:50] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-28 22:07:50] Made predictions with adjustments for position threshold 10
INFO [2025-03-28 22:07:50] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-28 22:07:50] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-28 22:07:50] Made predictions with adjustments for position threshold 30
INFO [2025-03-28 22:07:50] Position probability sums BEFORE normalization:
INFO [2025-03-28 22:07:50]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-28 22:07:50]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-28 22:07:50]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-28 22:07:50]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-28 22:07:50]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-28 22:07:50]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-28 22:07:50]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-28 22:07:50]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-28 22:07:50]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-28 22:07:50]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-28 22:07:50]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-28 22:07:50]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-28 22:07:50]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-28 22:07:50]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-28 22:07:50]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-28 22:07:50]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-28 22:07:50]   Recursive capping needed after redistribution
INFO [2025-03-28 22:07:50]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-28 22:07:50]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-28 22:07:50] Position probability sums AFTER normalization:
INFO [2025-03-28 22:07:50]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-28 22:07:50]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-28 22:07:50]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-28 22:07:50]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-28 22:07:50]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-28 22:07:50] Race 1 position probability sums after normalization:
INFO [2025-03-28 22:07:50]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-28 22:07:50]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:07:50]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-28 22:07:50]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:07:50]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-28 22:07:50]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:07:50]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-28 22:07:50]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:07:50]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-28 22:07:50]   Top 3 skiers for this threshold:
INFO [2025-03-28 22:07:50] Race 1 probability check:
INFO [2025-03-28 22:07:50] Combining race predictions
INFO [2025-03-28 22:07:50] Starting with first race data
INFO [2025-03-28 22:07:50] Probability column Race1_Probability exists in final predictions
INFO [2025-03-28 22:07:50]   Mean: 1
INFO [2025-03-28 22:07:50]   Sum: 75
INFO [2025-03-28 22:07:50] Calculating totals with probability weighting
INFO [2025-03-28 22:07:50] Returning final predictions
INFO [2025-03-28 22:07:50] Final predictions calculated for men
INFO [2025-03-28 22:07:50] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/men_position_probabilities.xlsx
INFO [2025-03-28 22:07:50] Saved men points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/men-points.xlsx
INFO [2025-03-28 22:07:50] No ladies races today
INFO [2025-03-28 22:07:50] Creating top contenders summary
INFO [2025-03-28 22:07:51] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250329/top_contenders.xlsx
INFO [2025-03-28 22:07:51] Race day prediction workflow complete
INFO [2025-03-28 22:07:51] race-picks.R execution complete
INFO [2025-03-29 20:41:54] Starting race day predictions process
INFO [2025-03-29 20:41:54] Reading races data
INFO [2025-03-29 20:41:54] Current date (UTC): 2025-03-29
INFO [2025-03-29 20:41:54] Found 1 races scheduled for today
INFO [2025-03-29 20:41:54] Found 1 men's races and 0 ladies races
INFO [2025-03-29 20:41:54] Reading race startlists
INFO [2025-03-29 20:41:55] Starting race-picks.R execution
INFO [2025-03-29 20:41:55] Running race day predictions workflow
INFO [2025-03-29 20:41:55] Processing men's predictions
INFO [2025-03-29 20:41:55] Processing men data
INFO [2025-03-29 20:41:55] Using WORLD CUP points system for today's race
INFO [2025-03-29 20:42:00] Race probability columns in startlist: Race1_Prob
INFO [2025-03-29 20:42:00] Processing men race 1: 50 C
INFO [2025-03-29 20:42:00] Using World Cup points for this race
INFO [2025-03-29 20:42:00] Race probability column Race1_Prob exists in startlist
INFO [2025-03-29 20:42:00]   Mean: 1
INFO [2025-03-29 20:42:00]   Sum: 75
INFO [2025-03-29 20:42:01] Creating model for top 1 positions
INFO [2025-03-29 20:42:02] Brier score for threshold 1 : 0.0112
INFO [2025-03-29 20:42:02] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-29 20:42:03] Creating model for top 3 positions
INFO [2025-03-29 20:42:06] Brier score for threshold 3 : 0.0291
INFO [2025-03-29 20:42:06] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-29 20:42:07] Creating model for top 5 positions
INFO [2025-03-29 20:42:09] Brier score for threshold 5 : 0.044
INFO [2025-03-29 20:42:09] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-29 20:42:10] Creating model for top 10 positions
INFO [2025-03-29 20:42:13] Brier score for threshold 10 : 0.0721
INFO [2025-03-29 20:42:13] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-29 20:42:14] Creating model for top 30 positions
INFO [2025-03-29 20:42:16] Brier score for threshold 30 : 0.1324
INFO [2025-03-29 20:42:16] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-29 20:42:18] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-29 20:42:18] Race probability columns found: Race1_Prob
INFO [2025-03-29 20:42:18] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-29 20:42:18] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-29 20:42:18] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-29 20:42:18] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-29 20:42:18] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-29 20:42:18] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-29 20:42:18] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-29 20:42:18] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-29 20:42:18] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-29 20:42:18] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-29 20:42:18] Calculated percentage for Distance_Elo
INFO [2025-03-29 20:42:18] Calculated percentage for Distance_C_Elo
INFO [2025-03-29 20:42:18] Calculated percentage for Distance_F_Elo
INFO [2025-03-29 20:42:18] Calculated percentage for Elo
INFO [2025-03-29 20:42:18] Calculated percentage for Sprint_Elo
INFO [2025-03-29 20:42:18] Calculated percentage for Sprint_C_Elo
INFO [2025-03-29 20:42:18] Calculated percentage for Sprint_F_Elo
INFO [2025-03-29 20:42:18] Calculated percentage for Freestyle_Elo
INFO [2025-03-29 20:42:18] Calculated percentage for Classic_Elo
INFO [2025-03-29 20:42:18] Race probability column Race1_Prob summary:
INFO [2025-03-29 20:42:18]   Mean: 1
INFO [2025-03-29 20:42:18]   Sum: 75
INFO [2025-03-29 20:42:18]   Max: 1
INFO [2025-03-29 20:42:18] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-29 20:42:18] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-29 20:42:18] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-29 20:42:18] Made predictions with adjustments for position threshold 1
INFO [2025-03-29 20:42:18] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-29 20:42:18] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-29 20:42:18] Made predictions with adjustments for position threshold 3
INFO [2025-03-29 20:42:18] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-29 20:42:18] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-29 20:42:18] Made predictions with adjustments for position threshold 5
INFO [2025-03-29 20:42:18] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-29 20:42:18] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-29 20:42:18] Made predictions with adjustments for position threshold 10
INFO [2025-03-29 20:42:18] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-29 20:42:18] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-29 20:42:18] Made predictions with adjustments for position threshold 30
INFO [2025-03-29 20:42:18] Position probability sums BEFORE normalization:
INFO [2025-03-29 20:42:18]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-29 20:42:18]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-29 20:42:18]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-29 20:42:18]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-29 20:42:18]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-29 20:42:18]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-29 20:42:18]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-29 20:42:18]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-29 20:42:18]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-29 20:42:18]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-29 20:42:18]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-29 20:42:18]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-29 20:42:18]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-29 20:42:18]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-29 20:42:18]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-29 20:42:18]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-29 20:42:18]   Recursive capping needed after redistribution
INFO [2025-03-29 20:42:18]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-29 20:42:18]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-29 20:42:18] Position probability sums AFTER normalization:
INFO [2025-03-29 20:42:18]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-29 20:42:18]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-29 20:42:18]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-29 20:42:18]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-29 20:42:18]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-29 20:42:18] Race 1 position probability sums after normalization:
INFO [2025-03-29 20:42:18]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-29 20:42:18]   Top 3 skiers for this threshold:
INFO [2025-03-29 20:42:18]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-29 20:42:18]   Top 3 skiers for this threshold:
INFO [2025-03-29 20:42:18]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-29 20:42:18]   Top 3 skiers for this threshold:
INFO [2025-03-29 20:42:18]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-29 20:42:18]   Top 3 skiers for this threshold:
INFO [2025-03-29 20:42:18]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-29 20:42:18]   Top 3 skiers for this threshold:
INFO [2025-03-29 20:42:19] Race 1 probability check:
INFO [2025-03-29 20:42:20] Combining race predictions
INFO [2025-03-29 20:42:20] Starting with first race data
INFO [2025-03-29 20:42:20] Probability column Race1_Probability exists in final predictions
INFO [2025-03-29 20:42:20]   Mean: 1
INFO [2025-03-29 20:42:20]   Sum: 75
INFO [2025-03-29 20:42:20] Calculating totals with probability weighting
INFO [2025-03-29 20:42:20] Returning final predictions
INFO [2025-03-29 20:42:20] Final predictions calculated for men
INFO [2025-03-29 20:42:21] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/men_position_probabilities.xlsx
INFO [2025-03-29 20:42:21] Saved men points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250329/men-points.xlsx
INFO [2025-03-29 20:42:21] No ladies races today
INFO [2025-03-29 20:42:21] Creating top contenders summary
INFO [2025-03-29 20:42:21] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250329/top_contenders.xlsx
INFO [2025-03-29 20:42:21] Race day prediction workflow complete
INFO [2025-03-29 20:42:21] race-picks.R execution complete
INFO [2025-03-30 11:59:43] Starting race day predictions process
INFO [2025-03-30 11:59:43] Reading races data
INFO [2025-03-30 11:59:43] Current date (UTC): 2025-03-30
INFO [2025-03-30 11:59:43] No races scheduled for today. Exiting.
INFO [2025-03-30 12:00:02] Starting race day predictions process
INFO [2025-03-30 12:00:02] Reading races data
INFO [2025-03-30 12:00:02] Current date (UTC): 2025-03-30
INFO [2025-03-30 12:00:02] Found 2 races scheduled for today
INFO [2025-03-30 12:00:02] Found 1 men's races and 1 ladies races
INFO [2025-03-30 12:00:02] Reading race startlists
INFO [2025-03-30 12:00:02] Starting race-picks.R execution
INFO [2025-03-30 12:00:02] Running race day predictions workflow
INFO [2025-03-30 12:00:02] Processing men's predictions
INFO [2025-03-30 12:00:03] Processing men data
INFO [2025-03-30 12:00:03] Using WORLD CUP points system for today's race
INFO [2025-03-30 12:00:07] Race probability columns in startlist: Race1_Prob
INFO [2025-03-30 12:00:07] Processing men race 1: 50 C
INFO [2025-03-30 12:00:07] Using World Cup points for this race
INFO [2025-03-30 12:00:07] Race probability column Race1_Prob exists in startlist
INFO [2025-03-30 12:00:07]   Mean: 1
INFO [2025-03-30 12:00:07]   Sum: 102
INFO [2025-03-30 12:00:09] Creating model for top 1 positions
INFO [2025-03-30 12:00:10] Brier score for threshold 1 : 0.0112
INFO [2025-03-30 12:00:10] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:00:11] Creating model for top 3 positions
INFO [2025-03-30 12:00:14] Brier score for threshold 3 : 0.0291
INFO [2025-03-30 12:00:14] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:00:15] Creating model for top 5 positions
INFO [2025-03-30 12:00:16] Brier score for threshold 5 : 0.044
INFO [2025-03-30 12:00:16] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:00:18] Creating model for top 10 positions
INFO [2025-03-30 12:01:22] Starting race day predictions process
INFO [2025-03-30 12:01:22] Reading races data
INFO [2025-03-30 12:01:22] Current date (UTC): 2025-03-30
INFO [2025-03-30 12:01:22] Found 2 races scheduled for today
INFO [2025-03-30 12:01:22] Found 1 men's races and 1 ladies races
INFO [2025-03-30 12:01:22] Reading race startlists
INFO [2025-03-30 12:01:23] Starting race-picks.R execution
INFO [2025-03-30 12:01:23] Running race day predictions workflow
INFO [2025-03-30 12:01:23] Processing men's predictions
INFO [2025-03-30 12:01:23] Processing men data
INFO [2025-03-30 12:01:23] Using WORLD CUP points system for today's race
INFO [2025-03-30 12:01:28] Race probability columns in startlist: Race1_Prob
INFO [2025-03-30 12:01:28] Processing men race 1: 50 C
INFO [2025-03-30 12:01:28] Using World Cup points for this race
INFO [2025-03-30 12:01:28] Race probability column Race1_Prob exists in startlist
INFO [2025-03-30 12:01:28]   Mean: 1
INFO [2025-03-30 12:01:28]   Sum: 75
INFO [2025-03-30 12:01:29] Creating model for top 1 positions
INFO [2025-03-30 12:01:30] Brier score for threshold 1 : 0.0112
INFO [2025-03-30 12:01:30] Variables selected for 1 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:01:31] Creating model for top 3 positions
INFO [2025-03-30 12:01:34] Brier score for threshold 3 : 0.0291
INFO [2025-03-30 12:01:34] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:01:35] Creating model for top 5 positions
INFO [2025-03-30 12:01:37] Brier score for threshold 5 : 0.044
INFO [2025-03-30 12:01:37] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:01:38] Creating model for top 10 positions
INFO [2025-03-30 12:01:41] Brier score for threshold 10 : 0.0721
INFO [2025-03-30 12:01:41] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:01:42] Creating model for top 30 positions
INFO [2025-03-30 12:01:44] Brier score for threshold 30 : 0.1324
INFO [2025-03-30 12:01:44] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:01:46] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-30 12:01:46] Race probability columns found: Race1_Prob
INFO [2025-03-30 12:01:46] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-30 12:01:46] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-30 12:01:46] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-30 12:01:46] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-30 12:01:46] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-30 12:01:46] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-30 12:01:46] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-30 12:01:46] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-30 12:01:46] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-30 12:01:46] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-30 12:01:46] Calculated percentage for Distance_Elo
INFO [2025-03-30 12:01:46] Calculated percentage for Distance_C_Elo
INFO [2025-03-30 12:01:46] Calculated percentage for Distance_F_Elo
INFO [2025-03-30 12:01:46] Calculated percentage for Elo
INFO [2025-03-30 12:01:46] Calculated percentage for Sprint_Elo
INFO [2025-03-30 12:01:46] Calculated percentage for Sprint_C_Elo
INFO [2025-03-30 12:01:46] Calculated percentage for Sprint_F_Elo
INFO [2025-03-30 12:01:46] Calculated percentage for Freestyle_Elo
INFO [2025-03-30 12:01:46] Calculated percentage for Classic_Elo
INFO [2025-03-30 12:01:46] Race probability column Race1_Prob summary:
INFO [2025-03-30 12:01:46]   Mean: 1
INFO [2025-03-30 12:01:46]   Sum: 75
INFO [2025-03-30 12:01:46]   Max: 1
INFO [2025-03-30 12:01:46] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-30 12:01:46] Model for threshold 1 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:01:46] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-30 12:01:46] Made predictions with adjustments for position threshold 1
INFO [2025-03-30 12:01:46] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:01:46] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-30 12:01:46] Made predictions with adjustments for position threshold 3
INFO [2025-03-30 12:01:46] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:01:46] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-30 12:01:46] Made predictions with adjustments for position threshold 5
INFO [2025-03-30 12:01:46] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:01:46] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-30 12:01:46] Made predictions with adjustments for position threshold 10
INFO [2025-03-30 12:01:46] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Freestyle_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:01:46] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-30 12:01:46] Made predictions with adjustments for position threshold 30
INFO [2025-03-30 12:01:47] Position probability sums BEFORE normalization:
INFO [2025-03-30 12:01:47]   prob_top1: 77.50% (target: 100%)
INFO [2025-03-30 12:01:47]   prob_top3: 255.00% (target: 300%)
INFO [2025-03-30 12:01:47]   prob_top5: 439.60% (target: 500%)
INFO [2025-03-30 12:01:47]   prob_top10: 786.00% (target: 1000%)
INFO [2025-03-30 12:01:47]   prob_top30: 2590.70% (target: 3000%)
INFO [2025-03-30 12:01:47]   prob_top1 after race prob adjustment: 77.50% (scaling by race participation)
INFO [2025-03-30 12:01:47]   prob_top1 normalization: applied scaling factor of 1.2903
INFO [2025-03-30 12:01:47]   prob_top3 after race prob adjustment: 255.00% (scaling by race participation)
INFO [2025-03-30 12:01:47]   prob_top3 normalization: applied scaling factor of 1.1765
INFO [2025-03-30 12:01:47]   prob_top5 after race prob adjustment: 439.60% (scaling by race participation)
INFO [2025-03-30 12:01:47]   prob_top5 normalization: applied scaling factor of 1.1374
INFO [2025-03-30 12:01:47]   prob_top10 after race prob adjustment: 786.00% (scaling by race participation)
INFO [2025-03-30 12:01:47]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-30 12:01:47]   prob_top10 normalization: applied scaling factor of 1.2723
INFO [2025-03-30 12:01:47]   prob_top30 after race prob adjustment: 2590.70% (scaling by race participation)
INFO [2025-03-30 12:01:47]   Capping 9 skiers with >100% probability for prob_top30
INFO [2025-03-30 12:01:47]   Recursive capping needed after redistribution
INFO [2025-03-30 12:01:47]   prob_top30 normalization: applied scaling factor of 1.1580
WARN [2025-03-30 12:01:47]   prob_top30 sum after capping: 2996.77% (target: 3000.00%)
INFO [2025-03-30 12:01:47] Position probability sums AFTER normalization:
INFO [2025-03-30 12:01:47]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-30 12:01:47]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-30 12:01:47]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-30 12:01:47]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-30 12:01:47]   prob_top30: 2996.77% (target: 3000%)
INFO [2025-03-30 12:01:47] Race 1 position probability sums after normalization:
INFO [2025-03-30 12:01:47]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-30 12:01:47]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:01:47]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-30 12:01:47]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:01:47]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-30 12:01:47]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:01:47]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-30 12:01:47]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:01:47]   prob_top30: 2996.77% (should be 3000%)
INFO [2025-03-30 12:01:47]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:01:47] Race 1 probability check:
INFO [2025-03-30 12:01:47] Combining race predictions
INFO [2025-03-30 12:01:47] Starting with first race data
INFO [2025-03-30 12:01:47] Probability column Race1_Probability exists in final predictions
INFO [2025-03-30 12:01:47]   Mean: 1
INFO [2025-03-30 12:01:47]   Sum: 75
INFO [2025-03-30 12:01:47] Calculating totals with probability weighting
INFO [2025-03-30 12:01:47] Returning final predictions
INFO [2025-03-30 12:01:47] Final predictions calculated for men
INFO [2025-03-30 12:01:49] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250330/men_position_probabilities.xlsx
INFO [2025-03-30 12:01:49] Saved men points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250330/men-points.xlsx
INFO [2025-03-30 12:01:49] Processing ladies predictions
INFO [2025-03-30 12:01:49] Processing ladies data
INFO [2025-03-30 12:01:49] Using WORLD CUP points system for today's race
INFO [2025-03-30 12:01:53] Race probability columns in startlist: Race1_Prob
INFO [2025-03-30 12:01:53] Processing ladies race 1: 50 C
INFO [2025-03-30 12:01:53] Using World Cup points for this race
INFO [2025-03-30 12:01:53] Race probability column Race1_Prob exists in startlist
INFO [2025-03-30 12:01:53]   Mean: 1
INFO [2025-03-30 12:01:53]   Sum: 46
INFO [2025-03-30 12:01:54] Creating model for top 1 positions
INFO [2025-03-30 12:01:56] Brier score for threshold 1 : 0.0122
INFO [2025-03-30 12:01:56] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-30 12:01:57] Creating model for top 3 positions
INFO [2025-03-30 12:01:59] Brier score for threshold 3 : 0.0309
INFO [2025-03-30 12:01:59] Variables selected for 3 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-30 12:02:00] Creating model for top 5 positions
INFO [2025-03-30 12:02:01] Brier score for threshold 5 : 0.0457
INFO [2025-03-30 12:02:01] Variables selected for 5 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-30 12:02:02] Creating model for top 10 positions
INFO [2025-03-30 12:02:03] Brier score for threshold 10 : 0.0709
INFO [2025-03-30 12:02:03] Variables selected for 10 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-30 12:02:04] Creating model for top 30 positions
INFO [2025-03-30 12:02:07] Brier score for threshold 30 : 0.1254
INFO [2025-03-30 12:02:07] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:02:09] Preparing startlist data for Distance_C_Pelo_Pct
INFO [2025-03-30 12:02:09] Race probability columns found: Race1_Prob
INFO [2025-03-30 12:02:09] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-30 12:02:09] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-30 12:02:09] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-30 12:02:09] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-30 12:02:09] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-30 12:02:09] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-30 12:02:09] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-30 12:02:09] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-30 12:02:09] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-30 12:02:09] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-30 12:02:09] Calculated percentage for Distance_Elo
INFO [2025-03-30 12:02:09] Calculated percentage for Distance_C_Elo
INFO [2025-03-30 12:02:09] Calculated percentage for Distance_F_Elo
INFO [2025-03-30 12:02:09] Calculated percentage for Elo
INFO [2025-03-30 12:02:09] Calculated percentage for Sprint_Elo
INFO [2025-03-30 12:02:09] Calculated percentage for Sprint_C_Elo
INFO [2025-03-30 12:02:09] Calculated percentage for Sprint_F_Elo
INFO [2025-03-30 12:02:09] Calculated percentage for Freestyle_Elo
INFO [2025-03-30 12:02:09] Calculated percentage for Classic_Elo
INFO [2025-03-30 12:02:09] Race probability column Race1_Prob summary:
INFO [2025-03-30 12:02:09]   Mean: 1
INFO [2025-03-30 12:02:09]   Sum: 46
INFO [2025-03-30 12:02:09]   Max: 1
INFO [2025-03-30 12:02:09] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-30 12:02:09] Model for threshold 1 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-30 12:02:09] Attempting prediction for threshold 1 with 46 rows
INFO [2025-03-30 12:02:09] Made predictions with adjustments for position threshold 1
INFO [2025-03-30 12:02:09] Model for threshold 3 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-30 12:02:09] Attempting prediction for threshold 3 with 46 rows
INFO [2025-03-30 12:02:09] Made predictions with adjustments for position threshold 3
INFO [2025-03-30 12:02:09] Model for threshold 5 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-30 12:02:09] Attempting prediction for threshold 5 with 46 rows
INFO [2025-03-30 12:02:09] Made predictions with adjustments for position threshold 5
INFO [2025-03-30 12:02:09] Model for threshold 10 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-30 12:02:09] Attempting prediction for threshold 10 with 46 rows
INFO [2025-03-30 12:02:09] Made predictions with adjustments for position threshold 10
INFO [2025-03-30 12:02:09] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:02:09] Attempting prediction for threshold 30 with 46 rows
INFO [2025-03-30 12:02:09] Made predictions with adjustments for position threshold 30
INFO [2025-03-30 12:02:09] Position probability sums BEFORE normalization:
INFO [2025-03-30 12:02:09]   prob_top1: 57.40% (target: 100%)
INFO [2025-03-30 12:02:09]   prob_top3: 239.30% (target: 300%)
INFO [2025-03-30 12:02:09]   prob_top5: 423.20% (target: 500%)
INFO [2025-03-30 12:02:09]   prob_top10: 859.00% (target: 1000%)
INFO [2025-03-30 12:02:09]   prob_top30: 2534.00% (target: 3000%)
INFO [2025-03-30 12:02:09]   prob_top1 after race prob adjustment: 57.40% (scaling by race participation)
INFO [2025-03-30 12:02:09]   prob_top1 normalization: applied scaling factor of 1.7422
INFO [2025-03-30 12:02:09]   prob_top3 after race prob adjustment: 239.30% (scaling by race participation)
INFO [2025-03-30 12:02:09]   prob_top3 normalization: applied scaling factor of 1.2537
INFO [2025-03-30 12:02:09]   prob_top5 after race prob adjustment: 423.20% (scaling by race participation)
INFO [2025-03-30 12:02:09]   prob_top5 normalization: applied scaling factor of 1.1815
INFO [2025-03-30 12:02:09]   prob_top10 after race prob adjustment: 859.00% (scaling by race participation)
INFO [2025-03-30 12:02:09]   Capping 2 skiers with >100% probability for prob_top10
INFO [2025-03-30 12:02:09]   Recursive capping needed after redistribution
INFO [2025-03-30 12:02:09]   prob_top10 normalization: applied scaling factor of 1.1641
INFO [2025-03-30 12:02:09]   prob_top30 after race prob adjustment: 2534.00% (scaling by race participation)
INFO [2025-03-30 12:02:09]   Capping 15 skiers with >100% probability for prob_top30
INFO [2025-03-30 12:02:09]   Recursive capping needed after redistribution
INFO [2025-03-30 12:02:09]   prob_top30 normalization: applied scaling factor of 1.1839
WARN [2025-03-30 12:02:09]   prob_top30 sum after capping: 2987.20% (target: 3000.00%)
INFO [2025-03-30 12:02:09] Position probability sums AFTER normalization:
INFO [2025-03-30 12:02:09]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-30 12:02:09]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-30 12:02:09]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-30 12:02:09]   prob_top10: 999.34% (target: 1000%)
INFO [2025-03-30 12:02:09]   prob_top30: 2987.20% (target: 3000%)
INFO [2025-03-30 12:02:09] Race 1 position probability sums after normalization:
INFO [2025-03-30 12:02:09]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-30 12:02:09]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:02:09]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-30 12:02:09]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:02:09]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-30 12:02:09]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:02:09]   prob_top10: 999.34% (should be 1000%)
INFO [2025-03-30 12:02:09]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:02:09]   prob_top30: 2987.20% (should be 3000%)
INFO [2025-03-30 12:02:09]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:02:12] Race 1 probability check:
INFO [2025-03-30 12:02:12] Combining race predictions
INFO [2025-03-30 12:02:12] Starting with first race data
INFO [2025-03-30 12:02:12] Probability column Race1_Probability exists in final predictions
INFO [2025-03-30 12:02:12]   Mean: 1
INFO [2025-03-30 12:02:12]   Sum: 46
INFO [2025-03-30 12:02:12] Calculating totals with probability weighting
INFO [2025-03-30 12:02:12] Returning final predictions
INFO [2025-03-30 12:02:12] Final predictions calculated for ladies
INFO [2025-03-30 12:02:15] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250330/ladies_position_probabilities.xlsx
INFO [2025-03-30 12:02:15] Saved ladies points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250330/ladies-points.xlsx
INFO [2025-03-30 12:02:15] Creating top contenders summary
INFO [2025-03-30 12:02:15] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250330/top_contenders.xlsx
INFO [2025-03-30 12:02:15] Race day prediction workflow complete
INFO [2025-03-30 12:02:15] race-picks.R execution complete
INFO [2025-03-30 12:05:02] Starting race day predictions process
INFO [2025-03-30 12:05:02] Reading races data
INFO [2025-03-30 12:05:02] Current date (UTC): 2025-03-30
INFO [2025-03-30 12:05:02] Found 2 races scheduled for today
INFO [2025-03-30 12:05:02] Found 1 men's races and 1 ladies races
INFO [2025-03-30 12:05:02] Reading race startlists
INFO [2025-03-30 12:05:02] Starting race-picks.R execution
INFO [2025-03-30 12:05:02] Running race day predictions workflow
INFO [2025-03-30 12:05:02] Processing men's predictions
INFO [2025-03-30 12:05:03] Processing men data
INFO [2025-03-30 12:05:03] Using WORLD CUP points system for today's race
INFO [2025-03-30 12:05:07] Race probability columns in startlist: Race1_Prob
INFO [2025-03-30 12:05:07] Processing men race 1: Rel 
INFO [2025-03-30 12:05:07] Using World Cup points for this race
INFO [2025-03-30 12:05:07] Race probability column Race1_Prob exists in startlist
INFO [2025-03-30 12:05:07]   Mean: 1
INFO [2025-03-30 12:05:07]   Sum: 75
INFO [2025-03-30 12:05:12] Creating model for top 1 positions
INFO [2025-03-30 12:05:18] Brier score for threshold 1 : 0.0114
INFO [2025-03-30 12:05:18] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:05:23] Creating model for top 3 positions
INFO [2025-03-30 12:05:32] Brier score for threshold 3 : 0.0305
INFO [2025-03-30 12:05:32] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:05:36] Creating model for top 5 positions
INFO [2025-03-30 12:05:43] Brier score for threshold 5 : 0.0454
INFO [2025-03-30 12:05:43] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:05:48] Creating model for top 10 positions
INFO [2025-03-30 12:05:55] Brier score for threshold 10 : 0.0738
INFO [2025-03-30 12:05:55] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:06:00] Creating model for top 30 positions
INFO [2025-03-30 12:06:12] Brier score for threshold 30 : 0.1315
INFO [2025-03-30 12:06:12] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:06:19] Preparing startlist data for Distance_Pelo_Pct
INFO [2025-03-30 12:06:19] Race probability columns found: Race1_Prob
INFO [2025-03-30 12:06:19] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-30 12:06:19] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-30 12:06:19] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-30 12:06:19] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-30 12:06:19] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-30 12:06:19] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-30 12:06:19] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-30 12:06:19] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-30 12:06:19] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-30 12:06:19] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-30 12:06:19] Calculated percentage for Distance_Elo
INFO [2025-03-30 12:06:19] Calculated percentage for Distance_C_Elo
INFO [2025-03-30 12:06:19] Calculated percentage for Distance_F_Elo
INFO [2025-03-30 12:06:19] Calculated percentage for Elo
INFO [2025-03-30 12:06:19] Calculated percentage for Sprint_Elo
INFO [2025-03-30 12:06:19] Calculated percentage for Sprint_C_Elo
INFO [2025-03-30 12:06:19] Calculated percentage for Sprint_F_Elo
INFO [2025-03-30 12:06:19] Calculated percentage for Freestyle_Elo
INFO [2025-03-30 12:06:19] Calculated percentage for Classic_Elo
INFO [2025-03-30 12:06:19] Race probability column Race1_Prob summary:
INFO [2025-03-30 12:06:19]   Mean: 1
INFO [2025-03-30 12:06:19]   Sum: 75
INFO [2025-03-30 12:06:19]   Max: 1
INFO [2025-03-30 12:06:19] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-30 12:06:19] Model for threshold 1 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:06:19] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-30 12:06:19] Made predictions with adjustments for position threshold 1
INFO [2025-03-30 12:06:19] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:06:19] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-30 12:06:19] Made predictions with adjustments for position threshold 3
INFO [2025-03-30 12:06:19] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:06:19] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-30 12:06:19] Made predictions with adjustments for position threshold 5
INFO [2025-03-30 12:06:19] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:06:19] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-30 12:06:19] Made predictions with adjustments for position threshold 10
INFO [2025-03-30 12:06:19] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:06:19] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-30 12:06:19] Made predictions with adjustments for position threshold 30
INFO [2025-03-30 12:06:19] Position probability sums BEFORE normalization:
INFO [2025-03-30 12:06:19]   prob_top1: 74.50% (target: 100%)
INFO [2025-03-30 12:06:19]   prob_top3: 239.00% (target: 300%)
INFO [2025-03-30 12:06:19]   prob_top5: 448.00% (target: 500%)
INFO [2025-03-30 12:06:19]   prob_top10: 823.90% (target: 1000%)
INFO [2025-03-30 12:06:19]   prob_top30: 2558.30% (target: 3000%)
INFO [2025-03-30 12:06:19]   prob_top1 after race prob adjustment: 74.50% (scaling by race participation)
INFO [2025-03-30 12:06:19]   prob_top1 normalization: applied scaling factor of 1.3423
INFO [2025-03-30 12:06:19]   prob_top3 after race prob adjustment: 239.00% (scaling by race participation)
INFO [2025-03-30 12:06:19]   prob_top3 normalization: applied scaling factor of 1.2552
INFO [2025-03-30 12:06:19]   prob_top5 after race prob adjustment: 448.00% (scaling by race participation)
INFO [2025-03-30 12:06:19]   prob_top5 normalization: applied scaling factor of 1.1161
INFO [2025-03-30 12:06:19]   prob_top10 after race prob adjustment: 823.90% (scaling by race participation)
INFO [2025-03-30 12:06:19]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-30 12:06:19]   prob_top10 normalization: applied scaling factor of 1.2137
INFO [2025-03-30 12:06:19]   prob_top30 after race prob adjustment: 2558.30% (scaling by race participation)
INFO [2025-03-30 12:06:19]   Capping 13 skiers with >100% probability for prob_top30
INFO [2025-03-30 12:06:19]   Recursive capping needed after redistribution
INFO [2025-03-30 12:06:19]   prob_top30 normalization: applied scaling factor of 1.1727
WARN [2025-03-30 12:06:19]   prob_top30 sum after capping: 2994.30% (target: 3000.00%)
INFO [2025-03-30 12:06:19] Position probability sums AFTER normalization:
INFO [2025-03-30 12:06:19]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-30 12:06:19]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-30 12:06:19]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-30 12:06:19]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-30 12:06:19]   prob_top30: 2994.30% (target: 3000%)
INFO [2025-03-30 12:06:19] Race 1 position probability sums after normalization:
INFO [2025-03-30 12:06:19]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-30 12:06:19]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:06:19]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-30 12:06:19]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:06:19]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-30 12:06:19]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:06:19]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-30 12:06:19]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:06:19]   prob_top30: 2994.30% (should be 3000%)
INFO [2025-03-30 12:06:19]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:06:19] Race 1 probability check:
INFO [2025-03-30 12:06:19] Combining race predictions
INFO [2025-03-30 12:06:19] Starting with first race data
INFO [2025-03-30 12:06:19] Probability column Race1_Probability exists in final predictions
INFO [2025-03-30 12:06:19]   Mean: 1
INFO [2025-03-30 12:06:19]   Sum: 75
INFO [2025-03-30 12:06:19] Calculating totals with probability weighting
INFO [2025-03-30 12:06:19] Returning final predictions
INFO [2025-03-30 12:06:19] Final predictions calculated for men
INFO [2025-03-30 12:06:21] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250330/men_position_probabilities.xlsx
INFO [2025-03-30 12:06:21] Saved men points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250330/men-points.xlsx
INFO [2025-03-30 12:06:21] Processing ladies predictions
INFO [2025-03-30 12:06:21] Processing ladies data
INFO [2025-03-30 12:06:21] Using WORLD CUP points system for today's race
INFO [2025-03-30 12:06:24] Race probability columns in startlist: Race1_Prob
INFO [2025-03-30 12:06:24] Processing ladies race 1: Rel 
INFO [2025-03-30 12:06:24] Using World Cup points for this race
INFO [2025-03-30 12:06:24] Race probability column Race1_Prob exists in startlist
INFO [2025-03-30 12:06:24]   Mean: 1
INFO [2025-03-30 12:06:24]   Sum: 46
INFO [2025-03-30 12:06:27] Creating model for top 1 positions
INFO [2025-03-30 12:06:31] Brier score for threshold 1 : 0.0117
INFO [2025-03-30 12:06:31] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-30 12:06:34] Creating model for top 3 positions
INFO [2025-03-30 12:06:44] Brier score for threshold 3 : 0.0307
INFO [2025-03-30 12:06:44] Variables selected for 3 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct
INFO [2025-03-30 12:06:48] Creating model for top 5 positions
INFO [2025-03-30 12:06:56] Brier score for threshold 5 : 0.0463
INFO [2025-03-30 12:06:56] Variables selected for 5 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct
INFO [2025-03-30 12:07:00] Creating model for top 10 positions
INFO [2025-03-30 12:07:04] Brier score for threshold 10 : 0.0759
INFO [2025-03-30 12:07:04] Variables selected for 10 position model: Prev_Points_Weighted, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct
INFO [2025-03-30 12:07:08] Creating model for top 30 positions
INFO [2025-03-30 12:07:13] Brier score for threshold 30 : 0.1306
INFO [2025-03-30 12:07:13] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:07:18] Preparing startlist data for Distance_Pelo_Pct
INFO [2025-03-30 12:07:18] Race probability columns found: Race1_Prob
INFO [2025-03-30 12:07:18] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-30 12:07:18] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-30 12:07:18] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-30 12:07:18] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-30 12:07:18] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-30 12:07:18] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-30 12:07:18] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-30 12:07:18] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-30 12:07:18] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-30 12:07:18] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-30 12:07:18] Calculated percentage for Distance_Elo
INFO [2025-03-30 12:07:18] Calculated percentage for Distance_C_Elo
INFO [2025-03-30 12:07:18] Calculated percentage for Distance_F_Elo
INFO [2025-03-30 12:07:18] Calculated percentage for Elo
INFO [2025-03-30 12:07:18] Calculated percentage for Sprint_Elo
INFO [2025-03-30 12:07:18] Calculated percentage for Sprint_C_Elo
INFO [2025-03-30 12:07:18] Calculated percentage for Sprint_F_Elo
INFO [2025-03-30 12:07:18] Calculated percentage for Freestyle_Elo
INFO [2025-03-30 12:07:18] Calculated percentage for Classic_Elo
INFO [2025-03-30 12:07:18] Race probability column Race1_Prob summary:
INFO [2025-03-30 12:07:18]   Mean: 1
INFO [2025-03-30 12:07:18]   Sum: 46
INFO [2025-03-30 12:07:18]   Max: 1
INFO [2025-03-30 12:07:18] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-30 12:07:18] Model for threshold 1 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-30 12:07:18] Attempting prediction for threshold 1 with 46 rows
INFO [2025-03-30 12:07:18] Made predictions with adjustments for position threshold 1
INFO [2025-03-30 12:07:18] Model for threshold 3 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct
INFO [2025-03-30 12:07:18] Attempting prediction for threshold 3 with 46 rows
INFO [2025-03-30 12:07:18] Made predictions with adjustments for position threshold 3
INFO [2025-03-30 12:07:18] Model for threshold 5 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct
INFO [2025-03-30 12:07:18] Attempting prediction for threshold 5 with 46 rows
INFO [2025-03-30 12:07:18] Made predictions with adjustments for position threshold 5
INFO [2025-03-30 12:07:18] Model for threshold 10 requires variables: Prev_Points_Weighted, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct
INFO [2025-03-30 12:07:18] Attempting prediction for threshold 10 with 46 rows
INFO [2025-03-30 12:07:18] Made predictions with adjustments for position threshold 10
INFO [2025-03-30 12:07:18] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:07:18] Attempting prediction for threshold 30 with 46 rows
INFO [2025-03-30 12:07:18] Made predictions with adjustments for position threshold 30
INFO [2025-03-30 12:07:18] Position probability sums BEFORE normalization:
INFO [2025-03-30 12:07:18]   prob_top1: 44.20% (target: 100%)
INFO [2025-03-30 12:07:18]   prob_top3: 152.60% (target: 300%)
INFO [2025-03-30 12:07:18]   prob_top5: 319.40% (target: 500%)
INFO [2025-03-30 12:07:18]   prob_top10: 775.40% (target: 1000%)
INFO [2025-03-30 12:07:18]   prob_top30: 2308.30% (target: 3000%)
INFO [2025-03-30 12:07:18]   prob_top1 after race prob adjustment: 44.20% (scaling by race participation)
INFO [2025-03-30 12:07:18]   prob_top1 normalization: applied scaling factor of 2.2624
INFO [2025-03-30 12:07:18]   prob_top3 after race prob adjustment: 152.60% (scaling by race participation)
INFO [2025-03-30 12:07:18]   Capping 1 skiers with >100% probability for prob_top3
INFO [2025-03-30 12:07:18]   prob_top3 normalization: applied scaling factor of 1.9659
INFO [2025-03-30 12:07:18]   prob_top5 after race prob adjustment: 319.40% (scaling by race participation)
INFO [2025-03-30 12:07:18]   Capping 1 skiers with >100% probability for prob_top5
INFO [2025-03-30 12:07:18]   prob_top5 normalization: applied scaling factor of 1.5654
INFO [2025-03-30 12:07:18]   prob_top10 after race prob adjustment: 775.40% (scaling by race participation)
INFO [2025-03-30 12:07:18]   Capping 2 skiers with >100% probability for prob_top10
INFO [2025-03-30 12:07:18]   Recursive capping needed after redistribution
INFO [2025-03-30 12:07:18]   prob_top10 normalization: applied scaling factor of 1.2897
WARN [2025-03-30 12:07:18]   prob_top10 sum after capping: 998.36% (target: 1000.00%)
INFO [2025-03-30 12:07:18]   prob_top30 after race prob adjustment: 2308.30% (scaling by race participation)
INFO [2025-03-30 12:07:18]   Capping 16 skiers with >100% probability for prob_top30
INFO [2025-03-30 12:07:18]   Recursive capping needed after redistribution
INFO [2025-03-30 12:07:18]   prob_top30 normalization: applied scaling factor of 1.2997
WARN [2025-03-30 12:07:18]   prob_top30 sum after capping: 2942.08% (target: 3000.00%)
INFO [2025-03-30 12:07:18] Position probability sums AFTER normalization:
INFO [2025-03-30 12:07:18]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-30 12:07:18]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-30 12:07:18]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-30 12:07:18]   prob_top10: 998.36% (target: 1000%)
INFO [2025-03-30 12:07:18]   prob_top30: 2942.08% (target: 3000%)
INFO [2025-03-30 12:07:18] Race 1 position probability sums after normalization:
INFO [2025-03-30 12:07:18]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-30 12:07:18]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:07:18]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-30 12:07:18]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:07:18]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-30 12:07:18]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:07:18]   prob_top10: 998.36% (should be 1000%)
INFO [2025-03-30 12:07:18]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:07:18]   prob_top30: 2942.08% (should be 3000%)
INFO [2025-03-30 12:07:18]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:07:18] Race 1 probability check:
INFO [2025-03-30 12:07:19] Combining race predictions
INFO [2025-03-30 12:07:19] Starting with first race data
INFO [2025-03-30 12:07:19] Probability column Race1_Probability exists in final predictions
INFO [2025-03-30 12:07:19]   Mean: 1
INFO [2025-03-30 12:07:19]   Sum: 46
INFO [2025-03-30 12:07:19] Calculating totals with probability weighting
INFO [2025-03-30 12:07:19] Returning final predictions
INFO [2025-03-30 12:07:19] Final predictions calculated for ladies
INFO [2025-03-30 12:07:22] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250330/ladies_position_probabilities.xlsx
INFO [2025-03-30 12:07:22] Saved ladies points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250330/ladies-points.xlsx
INFO [2025-03-30 12:07:22] Creating top contenders summary
INFO [2025-03-30 12:07:22] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250330/top_contenders.xlsx
INFO [2025-03-30 12:07:22] Race day prediction workflow complete
INFO [2025-03-30 12:07:22] race-picks.R execution complete
INFO [2025-03-30 12:08:31] Starting race day predictions process
INFO [2025-03-30 12:08:31] Reading races data
INFO [2025-03-30 12:08:31] Current date (UTC): 2025-03-30
INFO [2025-03-30 12:08:31] Found 2 races scheduled for today
INFO [2025-03-30 12:08:31] Found 1 men's races and 1 ladies races
INFO [2025-03-30 12:08:31] Reading race startlists
INFO [2025-03-30 12:08:32] Starting race-picks.R execution
INFO [2025-03-30 12:08:32] Running race day predictions workflow
INFO [2025-03-30 12:08:32] Processing men's predictions
INFO [2025-03-30 12:08:32] Processing men data
INFO [2025-03-30 12:08:32] Using WORLD CUP points system for today's race
INFO [2025-03-30 12:08:37] Race probability columns in startlist: Race1_Prob
INFO [2025-03-30 12:08:37] Processing men race 1: Rel 
INFO [2025-03-30 12:08:37] Using World Cup points for this race
INFO [2025-03-30 12:08:37] Race probability column Race1_Prob exists in startlist
INFO [2025-03-30 12:08:37]   Mean: 1
INFO [2025-03-30 12:08:37]   Sum: 75
INFO [2025-03-30 12:08:42] Creating model for top 1 positions
INFO [2025-03-30 12:08:47] Brier score for threshold 1 : 0.0114
INFO [2025-03-30 12:08:47] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:08:52] Creating model for top 3 positions
INFO [2025-03-30 12:09:00] Brier score for threshold 3 : 0.0305
INFO [2025-03-30 12:09:00] Variables selected for 3 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:09:04] Creating model for top 5 positions
INFO [2025-03-30 12:09:11] Brier score for threshold 5 : 0.0454
INFO [2025-03-30 12:09:11] Variables selected for 5 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:09:16] Creating model for top 10 positions
INFO [2025-03-30 12:09:23] Brier score for threshold 10 : 0.0738
INFO [2025-03-30 12:09:23] Variables selected for 10 position model: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:09:28] Creating model for top 30 positions
INFO [2025-03-30 12:09:40] Brier score for threshold 30 : 0.1315
INFO [2025-03-30 12:09:40] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:09:47] Preparing startlist data for Distance_Pelo_Pct
INFO [2025-03-30 12:09:47] Race probability columns found: Race1_Prob
INFO [2025-03-30 12:09:47] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-30 12:09:47] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-30 12:09:47] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-30 12:09:47] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-30 12:09:47] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-30 12:09:47] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-30 12:09:47] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-30 12:09:47] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-30 12:09:47] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-30 12:09:47] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-30 12:09:47] Calculated percentage for Distance_Elo
INFO [2025-03-30 12:09:47] Calculated percentage for Distance_C_Elo
INFO [2025-03-30 12:09:47] Calculated percentage for Distance_F_Elo
INFO [2025-03-30 12:09:47] Calculated percentage for Elo
INFO [2025-03-30 12:09:47] Calculated percentage for Sprint_Elo
INFO [2025-03-30 12:09:47] Calculated percentage for Sprint_C_Elo
INFO [2025-03-30 12:09:47] Calculated percentage for Sprint_F_Elo
INFO [2025-03-30 12:09:47] Calculated percentage for Freestyle_Elo
INFO [2025-03-30 12:09:47] Calculated percentage for Classic_Elo
INFO [2025-03-30 12:09:47] Race probability column Race1_Prob summary:
INFO [2025-03-30 12:09:47]   Mean: 1
INFO [2025-03-30 12:09:47]   Sum: 75
INFO [2025-03-30 12:09:47]   Max: 1
INFO [2025-03-30 12:09:47] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-30 12:09:47] Model for threshold 1 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:09:47] Attempting prediction for threshold 1 with 75 rows
INFO [2025-03-30 12:09:47] Made predictions with adjustments for position threshold 1
INFO [2025-03-30 12:09:47] Model for threshold 3 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:09:47] Attempting prediction for threshold 3 with 75 rows
INFO [2025-03-30 12:09:47] Made predictions with adjustments for position threshold 3
INFO [2025-03-30 12:09:47] Model for threshold 5 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:09:47] Attempting prediction for threshold 5 with 75 rows
INFO [2025-03-30 12:09:47] Made predictions with adjustments for position threshold 5
INFO [2025-03-30 12:09:47] Model for threshold 10 requires variables: Prev_Points_Weighted, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Classic_Pelo_Pct
INFO [2025-03-30 12:09:47] Attempting prediction for threshold 10 with 75 rows
INFO [2025-03-30 12:09:47] Made predictions with adjustments for position threshold 10
INFO [2025-03-30 12:09:47] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Sprint_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:09:47] Attempting prediction for threshold 30 with 75 rows
INFO [2025-03-30 12:09:47] Made predictions with adjustments for position threshold 30
INFO [2025-03-30 12:09:47] Position probability sums BEFORE normalization:
INFO [2025-03-30 12:09:47]   prob_top1: 74.50% (target: 100%)
INFO [2025-03-30 12:09:47]   prob_top3: 239.00% (target: 300%)
INFO [2025-03-30 12:09:47]   prob_top5: 448.00% (target: 500%)
INFO [2025-03-30 12:09:47]   prob_top10: 823.90% (target: 1000%)
INFO [2025-03-30 12:09:47]   prob_top30: 2558.30% (target: 3000%)
INFO [2025-03-30 12:09:47]   prob_top1 after race prob adjustment: 74.50% (scaling by race participation)
INFO [2025-03-30 12:09:47]   prob_top1 normalization: applied scaling factor of 1.3423
INFO [2025-03-30 12:09:47]   prob_top3 after race prob adjustment: 239.00% (scaling by race participation)
INFO [2025-03-30 12:09:47]   prob_top3 normalization: applied scaling factor of 1.2552
INFO [2025-03-30 12:09:47]   prob_top5 after race prob adjustment: 448.00% (scaling by race participation)
INFO [2025-03-30 12:09:47]   prob_top5 normalization: applied scaling factor of 1.1161
INFO [2025-03-30 12:09:47]   prob_top10 after race prob adjustment: 823.90% (scaling by race participation)
INFO [2025-03-30 12:09:47]   Capping 1 skiers with >100% probability for prob_top10
INFO [2025-03-30 12:09:47]   prob_top10 normalization: applied scaling factor of 1.2137
INFO [2025-03-30 12:09:47]   prob_top30 after race prob adjustment: 2558.30% (scaling by race participation)
INFO [2025-03-30 12:09:47]   Capping 13 skiers with >100% probability for prob_top30
INFO [2025-03-30 12:09:47]   Recursive capping needed after redistribution
INFO [2025-03-30 12:09:47]   prob_top30 normalization: applied scaling factor of 1.1727
WARN [2025-03-30 12:09:47]   prob_top30 sum after capping: 2994.30% (target: 3000.00%)
INFO [2025-03-30 12:09:47] Position probability sums AFTER normalization:
INFO [2025-03-30 12:09:47]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-30 12:09:47]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-30 12:09:47]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-30 12:09:47]   prob_top10: 1000.00% (target: 1000%)
INFO [2025-03-30 12:09:47]   prob_top30: 2994.30% (target: 3000%)
INFO [2025-03-30 12:09:47] Race 1 position probability sums after normalization:
INFO [2025-03-30 12:09:47]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-30 12:09:47]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:09:47]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-30 12:09:47]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:09:47]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-30 12:09:47]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:09:47]   prob_top10: 1000.00% (should be 1000%)
INFO [2025-03-30 12:09:47]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:09:47]   prob_top30: 2994.30% (should be 3000%)
INFO [2025-03-30 12:09:47]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:09:47] Race 1 probability check:
INFO [2025-03-30 12:09:49] Combining race predictions
INFO [2025-03-30 12:09:49] Starting with first race data
INFO [2025-03-30 12:09:49] Probability column Race1_Probability exists in final predictions
INFO [2025-03-30 12:09:49]   Mean: 1
INFO [2025-03-30 12:09:49]   Sum: 75
INFO [2025-03-30 12:09:49] Calculating totals with probability weighting
INFO [2025-03-30 12:09:49] Returning final predictions
INFO [2025-03-30 12:09:49] Final predictions calculated for men
INFO [2025-03-30 12:09:52] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250330/men_position_probabilities.xlsx
INFO [2025-03-30 12:09:52] Saved men points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250330/men-points.xlsx
INFO [2025-03-30 12:09:52] Processing ladies predictions
INFO [2025-03-30 12:09:52] Processing ladies data
INFO [2025-03-30 12:09:52] Using WORLD CUP points system for today's race
INFO [2025-03-30 12:09:55] Race probability columns in startlist: Race1_Prob
INFO [2025-03-30 12:09:55] Processing ladies race 1: Rel 
INFO [2025-03-30 12:09:55] Using World Cup points for this race
INFO [2025-03-30 12:09:55] Race probability column Race1_Prob exists in startlist
INFO [2025-03-30 12:09:55]   Mean: 1
INFO [2025-03-30 12:09:55]   Sum: 46
INFO [2025-03-30 12:09:58] Creating model for top 1 positions
INFO [2025-03-30 12:10:02] Brier score for threshold 1 : 0.0117
INFO [2025-03-30 12:10:02] Variables selected for 1 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-30 12:10:06] Creating model for top 3 positions
INFO [2025-03-30 12:10:15] Brier score for threshold 3 : 0.0307
INFO [2025-03-30 12:10:15] Variables selected for 3 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct
INFO [2025-03-30 12:10:19] Creating model for top 5 positions
INFO [2025-03-30 12:10:27] Brier score for threshold 5 : 0.0463
INFO [2025-03-30 12:10:27] Variables selected for 5 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct
INFO [2025-03-30 12:10:31] Creating model for top 10 positions
INFO [2025-03-30 12:10:35] Brier score for threshold 10 : 0.0759
INFO [2025-03-30 12:10:35] Variables selected for 10 position model: Prev_Points_Weighted, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct
INFO [2025-03-30 12:10:39] Creating model for top 30 positions
INFO [2025-03-30 12:10:45] Brier score for threshold 30 : 0.1306
INFO [2025-03-30 12:10:45] Variables selected for 30 position model: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:10:49] Preparing startlist data for Distance_Pelo_Pct
INFO [2025-03-30 12:10:49] Race probability columns found: Race1_Prob
INFO [2025-03-30 12:10:49] Available elo columns: Skier, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo
INFO [2025-03-30 12:10:49] Creating missing Pelo Pct column: Distance_Pelo_Pct
INFO [2025-03-30 12:10:49] Creating missing Pelo Pct column: Distance_C_Pelo_Pct
INFO [2025-03-30 12:10:49] Creating missing Pelo Pct column: Distance_F_Pelo_Pct
INFO [2025-03-30 12:10:49] Creating missing Pelo Pct column: Pelo_Pct
INFO [2025-03-30 12:10:49] Creating missing Pelo Pct column: Sprint_Pelo_Pct
INFO [2025-03-30 12:10:49] Creating missing Pelo Pct column: Sprint_C_Pelo_Pct
INFO [2025-03-30 12:10:49] Creating missing Pelo Pct column: Sprint_F_Pelo_Pct
INFO [2025-03-30 12:10:49] Creating missing Pelo Pct column: Freestyle_Pelo_Pct
INFO [2025-03-30 12:10:49] Creating missing Pelo Pct column: Classic_Pelo_Pct
INFO [2025-03-30 12:10:49] Calculated percentage for Distance_Elo
INFO [2025-03-30 12:10:49] Calculated percentage for Distance_C_Elo
INFO [2025-03-30 12:10:49] Calculated percentage for Distance_F_Elo
INFO [2025-03-30 12:10:49] Calculated percentage for Elo
INFO [2025-03-30 12:10:49] Calculated percentage for Sprint_Elo
INFO [2025-03-30 12:10:49] Calculated percentage for Sprint_C_Elo
INFO [2025-03-30 12:10:49] Calculated percentage for Sprint_F_Elo
INFO [2025-03-30 12:10:49] Calculated percentage for Freestyle_Elo
INFO [2025-03-30 12:10:49] Calculated percentage for Classic_Elo
INFO [2025-03-30 12:10:49] Race probability column Race1_Prob summary:
INFO [2025-03-30 12:10:49]   Mean: 1
INFO [2025-03-30 12:10:49]   Sum: 46
INFO [2025-03-30 12:10:49]   Max: 1
INFO [2025-03-30 12:10:49] Final columns in result_df: Skier, ID, Nation, Sex, Price, Race1_Prob, Distance_Elo, Distance_C_Elo, Distance_F_Elo, Elo, Sprint_Elo, Sprint_C_Elo, Sprint_F_Elo, Freestyle_Elo, Classic_Elo, Prev_Points_Weighted, Distance_Pelo_Pct, Distance_C_Pelo_Pct, Distance_F_Pelo_Pct, Pelo_Pct, Sprint_Pelo_Pct, Sprint_C_Pelo_Pct, Sprint_F_Pelo_Pct, Freestyle_Pelo_Pct, Classic_Pelo_Pct, Distance_Elo_Pct, Distance_C_Elo_Pct, Distance_F_Elo_Pct, Elo_Pct, Sprint_Elo_Pct, Sprint_C_Elo_Pct, Sprint_F_Elo_Pct, Freestyle_Elo_Pct, Classic_Elo_Pct
INFO [2025-03-30 12:10:49] Model for threshold 1 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct
INFO [2025-03-30 12:10:49] Attempting prediction for threshold 1 with 46 rows
INFO [2025-03-30 12:10:49] Made predictions with adjustments for position threshold 1
INFO [2025-03-30 12:10:49] Model for threshold 3 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct
INFO [2025-03-30 12:10:49] Attempting prediction for threshold 3 with 46 rows
INFO [2025-03-30 12:10:49] Made predictions with adjustments for position threshold 3
INFO [2025-03-30 12:10:49] Model for threshold 5 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct
INFO [2025-03-30 12:10:49] Attempting prediction for threshold 5 with 46 rows
INFO [2025-03-30 12:10:49] Made predictions with adjustments for position threshold 5
INFO [2025-03-30 12:10:49] Model for threshold 10 requires variables: Prev_Points_Weighted, Distance_F_Pelo_Pct, Distance_C_Pelo_Pct, Freestyle_Pelo_Pct, Sprint_F_Pelo_Pct
INFO [2025-03-30 12:10:49] Attempting prediction for threshold 10 with 46 rows
INFO [2025-03-30 12:10:49] Made predictions with adjustments for position threshold 10
INFO [2025-03-30 12:10:49] Model for threshold 30 requires variables: Prev_Points_Weighted, Distance_Pelo_Pct, Distance_F_Pelo_Pct, Classic_Pelo_Pct, Pelo_Pct
INFO [2025-03-30 12:10:49] Attempting prediction for threshold 30 with 46 rows
INFO [2025-03-30 12:10:49] Made predictions with adjustments for position threshold 30
INFO [2025-03-30 12:10:49] Position probability sums BEFORE normalization:
INFO [2025-03-30 12:10:49]   prob_top1: 44.20% (target: 100%)
INFO [2025-03-30 12:10:49]   prob_top3: 152.60% (target: 300%)
INFO [2025-03-30 12:10:49]   prob_top5: 319.40% (target: 500%)
INFO [2025-03-30 12:10:49]   prob_top10: 775.40% (target: 1000%)
INFO [2025-03-30 12:10:49]   prob_top30: 2308.30% (target: 3000%)
INFO [2025-03-30 12:10:49]   prob_top1 after race prob adjustment: 44.20% (scaling by race participation)
INFO [2025-03-30 12:10:49]   prob_top1 normalization: applied scaling factor of 2.2624
INFO [2025-03-30 12:10:49]   prob_top3 after race prob adjustment: 152.60% (scaling by race participation)
INFO [2025-03-30 12:10:49]   Capping 1 skiers with >100% probability for prob_top3
INFO [2025-03-30 12:10:49]   prob_top3 normalization: applied scaling factor of 1.9659
INFO [2025-03-30 12:10:49]   prob_top5 after race prob adjustment: 319.40% (scaling by race participation)
INFO [2025-03-30 12:10:49]   Capping 1 skiers with >100% probability for prob_top5
INFO [2025-03-30 12:10:49]   prob_top5 normalization: applied scaling factor of 1.5654
INFO [2025-03-30 12:10:49]   prob_top10 after race prob adjustment: 775.40% (scaling by race participation)
INFO [2025-03-30 12:10:49]   Capping 2 skiers with >100% probability for prob_top10
INFO [2025-03-30 12:10:49]   Recursive capping needed after redistribution
INFO [2025-03-30 12:10:49]   prob_top10 normalization: applied scaling factor of 1.2897
WARN [2025-03-30 12:10:49]   prob_top10 sum after capping: 998.36% (target: 1000.00%)
INFO [2025-03-30 12:10:49]   prob_top30 after race prob adjustment: 2308.30% (scaling by race participation)
INFO [2025-03-30 12:10:49]   Capping 16 skiers with >100% probability for prob_top30
INFO [2025-03-30 12:10:49]   Recursive capping needed after redistribution
INFO [2025-03-30 12:10:49]   prob_top30 normalization: applied scaling factor of 1.2997
WARN [2025-03-30 12:10:49]   prob_top30 sum after capping: 2942.08% (target: 3000.00%)
INFO [2025-03-30 12:10:49] Position probability sums AFTER normalization:
INFO [2025-03-30 12:10:49]   prob_top1: 100.00% (target: 100%)
INFO [2025-03-30 12:10:49]   prob_top3: 300.00% (target: 300%)
INFO [2025-03-30 12:10:49]   prob_top5: 500.00% (target: 500%)
INFO [2025-03-30 12:10:49]   prob_top10: 998.36% (target: 1000%)
INFO [2025-03-30 12:10:49]   prob_top30: 2942.08% (target: 3000%)
INFO [2025-03-30 12:10:49] Race 1 position probability sums after normalization:
INFO [2025-03-30 12:10:49]   prob_top1: 100.00% (should be 100%)
INFO [2025-03-30 12:10:49]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:10:49]   prob_top3: 300.00% (should be 300%)
INFO [2025-03-30 12:10:49]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:10:49]   prob_top5: 500.00% (should be 500%)
INFO [2025-03-30 12:10:49]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:10:49]   prob_top10: 998.36% (should be 1000%)
INFO [2025-03-30 12:10:49]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:10:49]   prob_top30: 2942.08% (should be 3000%)
INFO [2025-03-30 12:10:49]   Top 3 skiers for this threshold:
INFO [2025-03-30 12:10:50] Race 1 probability check:
INFO [2025-03-30 12:10:50] Combining race predictions
INFO [2025-03-30 12:10:50] Starting with first race data
INFO [2025-03-30 12:10:50] Probability column Race1_Probability exists in final predictions
INFO [2025-03-30 12:10:50]   Mean: 1
INFO [2025-03-30 12:10:50]   Sum: 46
INFO [2025-03-30 12:10:50] Calculating totals with probability weighting
INFO [2025-03-30 12:10:50] Returning final predictions
INFO [2025-03-30 12:10:50] Final predictions calculated for ladies
INFO [2025-03-30 12:10:50] Formatted position probabilities saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250330/ladies_position_probabilities.xlsx
INFO [2025-03-30 12:10:50] Saved ladies points predictions to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-picks/20250330/ladies-points.xlsx
INFO [2025-03-30 12:10:50] Creating top contenders summary
INFO [2025-03-30 12:10:50] Top contenders summary saved to /Users/syverjohansen/blog/daehl-e/content/post/cross-country/drafts/race-predictions/20250330/top_contenders.xlsx
INFO [2025-03-30 12:10:50] Race day prediction workflow complete
INFO [2025-03-30 12:10:50] race-picks.R execution complete
INFO [2025-03-30 13:33:28] Starting race day predictions process
INFO [2025-03-30 13:33:28] Reading races data
INFO [2025-03-30 13:33:28] Current date (UTC): 2025-03-30
INFO [2025-03-30 13:33:28] Found 1 races scheduled for today
INFO [2025-03-30 13:33:28] Found 0 men's races and 0 ladies races
INFO [2025-03-30 13:33:28] Reading race startlists
INFO [2025-03-30 13:33:29] Starting race-picks.R execution
INFO [2025-03-30 13:33:29] Running race day predictions workflow
INFO [2025-03-30 13:33:29] No men's races today
INFO [2025-03-30 13:33:29] No ladies races today
INFO [2025-03-30 13:33:29] No results to create top contenders summary
INFO [2025-03-30 13:33:29] Race day prediction workflow complete
INFO [2025-03-30 13:33:29] race-picks.R execution complete
INFO [2025-03-30 13:33:47] Starting race day predictions process
INFO [2025-03-30 13:33:47] Reading races data
INFO [2025-03-30 13:33:47] Current date (UTC): 2025-03-30
INFO [2025-03-30 13:33:47] No races scheduled for today. Exiting.
INFO [2025-03-30 13:40:29] Starting race day predictions process
INFO [2025-03-30 13:40:29] Reading races data
INFO [2025-03-30 13:40:29] Current date (UTC): 2025-03-30
INFO [2025-03-30 13:40:29] Found 1 races scheduled for today
INFO [2025-03-30 13:40:29] Found 0 men's races and 0 ladies races
INFO [2025-03-30 13:40:29] Reading race startlists
INFO [2025-03-30 13:40:30] Starting race-picks.R execution
INFO [2025-03-30 13:40:30] Running race day predictions workflow
INFO [2025-03-30 13:40:30] No men's races today
INFO [2025-03-30 13:40:30] No ladies races today
INFO [2025-03-30 13:40:30] No results to create top contenders summary
INFO [2025-03-30 13:40:30] Race day prediction workflow complete
INFO [2025-03-30 13:40:30] race-picks.R execution complete
INFO [2025-03-30 13:45:45] Starting race day predictions process
INFO [2025-03-30 13:45:45] Reading races data
INFO [2025-03-30 13:45:45] Current date (UTC): 2025-03-30
INFO [2025-03-30 13:45:45] Found 1 races scheduled for today
INFO [2025-03-30 13:45:45] Found 0 men's races and 0 ladies races
INFO [2025-03-30 13:45:45] Reading race startlists
INFO [2025-03-30 13:45:46] Starting race-picks.R execution
INFO [2025-03-30 13:45:46] Running race day predictions workflow
INFO [2025-03-30 13:45:46] No men's races today
INFO [2025-03-30 13:45:46] No ladies races today
INFO [2025-03-30 13:45:46] No results to create top contenders summary
INFO [2025-03-30 13:45:46] Race day prediction workflow complete
INFO [2025-03-30 13:45:46] race-picks.R execution complete
INFO [2025-03-30 13:46:22] Starting race day predictions process
INFO [2025-03-30 13:46:22] Reading races data
INFO [2025-03-30 13:46:22] Current date (UTC): 2025-03-30
INFO [2025-03-30 13:46:22] Found 1 races scheduled for today
INFO [2025-03-30 13:46:22] Found 0 men's races and 0 ladies races
INFO [2025-03-30 13:46:22] Reading race startlists
INFO [2025-03-30 13:46:22] Starting race-picks.R execution
INFO [2025-03-30 13:46:22] Running race day predictions workflow
INFO [2025-03-30 13:46:22] No men's races today
INFO [2025-03-30 13:46:22] No ladies races today
INFO [2025-03-30 13:46:22] No results to create top contenders summary
INFO [2025-03-30 13:46:22] Race day prediction workflow complete
INFO [2025-03-30 13:46:22] race-picks.R execution complete
INFO [2025-03-30 13:48:43] Starting race day predictions process
INFO [2025-03-30 13:48:43] Reading races data
INFO [2025-03-30 13:48:43] Current date (UTC): 2025-03-30
INFO [2025-03-30 13:48:43] Found 1 races scheduled for today
INFO [2025-03-30 13:48:43] Found 0 men's races and 0 ladies races
INFO [2025-03-30 13:48:43] Reading race startlists
INFO [2025-03-30 13:48:43] Starting race-picks.R execution
INFO [2025-03-30 13:48:43] Running race day predictions workflow
INFO [2025-03-30 13:48:43] No men's races today
INFO [2025-03-30 13:48:43] No ladies races today
INFO [2025-03-30 13:48:43] No results to create top contenders summary
INFO [2025-03-30 13:48:43] Race day prediction workflow complete
INFO [2025-03-30 13:48:43] race-picks.R execution complete
INFO [2025-03-30 13:49:31] Starting race day predictions process
INFO [2025-03-30 13:49:31] Reading races data
INFO [2025-03-30 13:49:31] Current date (UTC): 2025-03-30
INFO [2025-03-30 13:49:31] Found 1 races scheduled for today
INFO [2025-03-30 13:49:31] Found 0 men's races and 0 ladies races
INFO [2025-03-30 13:49:31] Reading race startlists
INFO [2025-03-30 13:49:31] Starting race-picks.R execution
INFO [2025-03-30 13:49:31] Running race day predictions workflow
INFO [2025-03-30 13:49:31] No men's races today
INFO [2025-03-30 13:49:31] No ladies races today
INFO [2025-03-30 13:49:31] No results to create top contenders summary
INFO [2025-03-30 13:49:31] Race day prediction workflow complete
INFO [2025-03-30 13:49:31] race-picks.R execution complete
INFO [2025-03-30 13:56:14] Starting race day predictions process
INFO [2025-03-30 13:56:14] Reading races data
INFO [2025-03-30 13:56:14] Current date (UTC): 2025-03-30
INFO [2025-03-30 13:56:14] Found 1 races scheduled for today
INFO [2025-03-30 13:56:14] Found 0 men's races and 0 ladies races
INFO [2025-03-30 13:56:14] Reading race startlists
INFO [2025-03-30 13:56:15] Starting race-picks.R execution
INFO [2025-03-30 13:56:15] Running race day predictions workflow
INFO [2025-03-30 13:56:15] No men's races today
INFO [2025-03-30 13:56:15] No ladies races today
INFO [2025-03-30 13:56:15] No results to create top contenders summary
INFO [2025-03-30 13:56:15] Race day prediction workflow complete
INFO [2025-03-30 13:56:15] race-picks.R execution complete
